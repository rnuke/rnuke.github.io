!function(e,t,r,n,s){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a="function"==typeof i.parcelRequirebbb8&&i.parcelRequirebbb8,o=a.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function c(t,r){if(!o[t]){if(!e[t]){var n="function"==typeof i.parcelRequirebbb8&&i.parcelRequirebbb8;if(!r&&n)return n(t,!0);if(a)return a(t,!0);if(u&&"string"==typeof t)return u(t);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}f.resolve=function(r){var n=e[t][1][r];return null!=n?n:r},f.cache={};var l=o[t]=new c.Module(t);e[t][0].call(l.exports,f,l,l.exports,this)}return o[t].exports;function f(e){var t=f.resolve(e);return!1===t?{}:c(t)}}c.isParcelRequire=!0,c.Module=function(e){this.id=e,this.bundle=c,this.exports={}},c.modules=e,c.cache=o,c.parent=a,c.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},Object.defineProperty(c,"root",{get:function(){return i.parcelRequirebbb8}}),i.parcelRequirebbb8=c;for(var l=0;l<t.length;l++)c(t[l]);var f=c(r);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof define&&define.amd&&define((function(){return f}))}({b4ts6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),s=e("@hotwired/stimulus"),i=e("./controllers/authorize_controller"),a=n.interopDefault(i),o=e("./controllers/nuke_controller"),u=n.interopDefault(o);window.Stimulus=s.Application.start(),Stimulus.register("authorize",a.default),Stimulus.register("nuke",u.default)},{"@hotwired/stimulus":"51pPy","./controllers/authorize_controller":"2Z9zf","./controllers/nuke_controller":"bRnoY","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"51pPy":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"Application",(function(){return ye})),n.export(r,"AttributeObserver",(function(){return U})),n.export(r,"Context",(function(){return ee})),n.export(r,"Controller",(function(){return Ee})),n.export(r,"ElementObserver",(function(){return q})),n.export(r,"IndexedMultimap",(function(){return J})),n.export(r,"Multimap",(function(){return W})),n.export(r,"StringMapObserver",(function(){return z})),n.export(r,"TokenListObserver",(function(){return Y})),n.export(r,"ValueListObserver",(function(){return X})),n.export(r,"add",(function(){return K})),n.export(r,"defaultSchema",(function(){return me})),n.export(r,"del",(function(){return V})),n.export(r,"fetch",(function(){return G})),n.export(r,"prune",(function(){return H}));var s=e("@swc/helpers/src/_async_to_generator.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_class_call_check.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_create_class.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_define_property.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_get.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_get_prototype_of.mjs"),v=n.interopDefault(p),m=e("@swc/helpers/src/_inherits.mjs"),y=n.interopDefault(m),_=e("@swc/helpers/src/_sliced_to_array.mjs"),g=n.interopDefault(_),b=e("@swc/helpers/src/_to_consumable_array.mjs"),k=n.interopDefault(b),w=e("@swc/helpers/src/_type_of.mjs"),j=n.interopDefault(w),x=e("@swc/helpers/src/_create_super.mjs"),E=n.interopDefault(x),D=e("regenerator-runtime"),A=n.interopDefault(D),O=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.eventTarget=t,this.eventName=r,this.eventOptions=n,this.unorderedBindings=new Set}return(0,c.default)(e,[{key:"connect",value:function(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}},{key:"disconnect",value:function(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}},{key:"bindingConnected",value:function(e){this.unorderedBindings.add(e)}},{key:"bindingDisconnected",value:function(e){this.unorderedBindings.delete(e)}},{key:"handleEvent",value:function(e){var t=function(e){if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}(e),r=!0,n=!1,s=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value;if(t.immediatePropagationStopped)break;o.handleEvent(t)}}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}}},{key:"bindings",get:function(){return Array.from(this.unorderedBindings).sort((function(e,t){var r=e.index,n=t.index;return r<n?-1:r>n?1:0}))}}]),e}();var I=function(){"use strict";function e(t){(0,o.default)(this,e),this.application=t,this.eventListenerMaps=new Map,this.started=!1}return(0,c.default)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.eventListeners.forEach((function(e){return e.connect()})))}},{key:"stop",value:function(){this.started&&(this.started=!1,this.eventListeners.forEach((function(e){return e.disconnect()})))}},{key:"eventListeners",get:function(){return Array.from(this.eventListenerMaps.values()).reduce((function(e,t){return e.concat(Array.from(t.values()))}),[])}},{key:"bindingConnected",value:function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}},{key:"bindingDisconnected",value:function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)}},{key:"handleError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.application.handleError(e,"Error ".concat(t),r)}},{key:"fetchEventListenerForBinding",value:function(e){var t=e.eventTarget,r=e.eventName,n=e.eventOptions;return this.fetchEventListener(t,r,n)}},{key:"fetchEventListener",value:function(e,t,r){var n=this.fetchEventListenerMapForEventTarget(e),s=this.cacheKey(t,r),i=n.get(s);return i||(i=this.createEventListener(e,t,r),n.set(s,i)),i}},{key:"createEventListener",value:function(e,t,r){var n=new O(e,t,r);return this.started&&n.connect(),n}},{key:"fetchEventListenerMapForEventTarget",value:function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}},{key:"cacheKey",value:function(e,t){var r=[e];return Object.keys(t).sort().forEach((function(e){r.push("".concat(t[e]?"":"!").concat(e))})),r.join(":")}}]),e}(),R=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;function T(e){return"window"==e?window:"document"==e?document:void 0}function C(e){return e.replace(/(?:[_-])([a-z0-9])/g,(function(e,t){return t.toUpperCase()}))}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}function B(e){return e.replace(/([A-Z])/g,(function(e,t){return"-".concat(t.toLowerCase())}))}var P=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.element=t,this.index=r,this.eventTarget=n.eventTarget||t,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in L)return L[t](e)}(t)||M("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||M("missing identifier"),this.methodName=n.methodName||M("missing method name")}return(0,c.default)(e,[{key:"toString",value:function(){var e=this.eventTargetName?"@".concat(this.eventTargetName):"";return"".concat(this.eventName).concat(e,"->").concat(this.identifier,"#").concat(this.methodName)}},{key:"params",get:function(){var e={},t=new RegExp("^data-".concat(this.identifier,"-(.+)-param$")),r=!0,n=!1,s=void 0;try{for(var i,a=Array.from(this.element.attributes)[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value,u=o.name,c=o.value,l=u.match(t),f=l&&l[1];f&&(e[C(f)]=N(c))}}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}return e}},{key:"eventTargetName",get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e}}],[{key:"forToken",value:function(e){return new this(e.element,e.index,(t=e.content,{eventTarget:T((n=t.trim().match(R)||[])[4]),eventName:n[2],eventOptions:n[9]?(r=n[9],r.split(":").reduce((function(e,t){return Object.assign(e,(0,f.default)({},t.replace(/^!/,""),!/^!/.test(t)))}),{})):{},identifier:n[5],methodName:n[7]}));var t,r,n}}]),e}(),L={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},details:function(e){return"toggle"},input:function(e){return"submit"==e.getAttribute("type")?"click":"input"},select:function(e){return"change"},textarea:function(e){return"input"}};function M(e){throw new Error(e)}function N(e){try{return JSON.parse(e)}catch(t){return e}}var F=function(){"use strict";function e(t,r){(0,o.default)(this,e),this.context=t,this.action=r}return(0,c.default)(e,[{key:"index",get:function(){return this.action.index}},{key:"eventTarget",get:function(){return this.action.eventTarget}},{key:"eventOptions",get:function(){return this.action.eventOptions}},{key:"identifier",get:function(){return this.context.identifier}},{key:"handleEvent",value:function(e){this.willBeInvokedByEvent(e)&&this.shouldBeInvokedPerSelf(e)&&(this.processStopPropagation(e),this.processPreventDefault(e),this.invokeWithEvent(e))}},{key:"eventName",get:function(){return this.action.eventName}},{key:"method",get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'.concat(this.action,'" references undefined method "').concat(this.methodName,'"'))}},{key:"processStopPropagation",value:function(e){this.eventOptions.stop&&e.stopPropagation()}},{key:"processPreventDefault",value:function(e){this.eventOptions.prevent&&e.preventDefault()}},{key:"invokeWithEvent",value:function(e){var t=e.target,r=e.currentTarget;try{var n=this.action.params,s=Object.assign(e,{params:n});this.method.call(this.controller,s),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:r,action:this.methodName})}catch(t){var i=this,a={identifier:i.identifier,controller:i.controller,element:i.element,index:i.index,event:e};this.context.handleError(t,'invoking action "'.concat(this.action,'"'),a)}}},{key:"shouldBeInvokedPerSelf",value:function(e){return!0!==this.action.eventOptions.self||this.action.element===e.target}},{key:"willBeInvokedByEvent",value:function(e){var t=e.target;return this.element===t||(t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element))}},{key:"controller",get:function(){return this.context.controller}},{key:"methodName",get:function(){return this.action.methodName}},{key:"element",get:function(){return this.scope.element}},{key:"scope",get:function(){return this.context.scope}}]),e}(),q=function(){"use strict";function e(t,r){var n=this;(0,o.default)(this,e),this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=t,this.started=!1,this.delegate=r,this.elements=new Set,this.mutationObserver=new MutationObserver((function(e){return n.processMutations(e)}))}return(0,c.default)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}},{key:"pause",value:function(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}},{key:"refresh",value:function(){if(this.started){var e=new Set(this.matchElementsInTree()),t=!0,r=!1,n=void 0;try{for(var s,i=Array.from(this.elements)[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var a=s.value;e.has(a)||this.removeElement(a)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}var o=!0,u=!1,c=void 0;try{for(var l,f=Array.from(e)[Symbol.iterator]();!(o=(l=f.next()).done);o=!0){var h=l.value;this.addElement(h)}}catch(e){u=!0,c=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw c}}}}},{key:"processMutations",value:function(e){var t=!0,r=!1,n=void 0;if(this.started)try{for(var s,i=e[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var a=s.value;this.processMutation(a)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"processMutation",value:function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}},{key:"processAttributeChange",value:function(e,t){var r=e;this.elements.has(r)?this.delegate.elementAttributeChanged&&this.matchElement(r)?this.delegate.elementAttributeChanged(r,t):this.removeElement(r):this.matchElement(r)&&this.addElement(r)}},{key:"processRemovedNodes",value:function(e){var t=!0,r=!1,n=void 0;try{for(var s,i=Array.from(e)[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var a=s.value,o=this.elementFromNode(a);o&&this.processTree(o,this.removeElement)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"processAddedNodes",value:function(e){var t=!0,r=!1,n=void 0;try{for(var s,i=Array.from(e)[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var a=s.value,o=this.elementFromNode(a);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"matchElement",value:function(e){return this.delegate.matchElement(e)}},{key:"matchElementsInTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element;return this.delegate.matchElementsInTree(e)}},{key:"processTree",value:function(e,t){var r=!0,n=!1,s=void 0;try{for(var i,a=this.matchElementsInTree(e)[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var o=i.value;t.call(this,o)}}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}}},{key:"elementFromNode",value:function(e){if(e.nodeType==Node.ELEMENT_NODE)return e}},{key:"elementIsActive",value:function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)}},{key:"addElement",value:function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}},{key:"removeElement",value:function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}]),e}(),U=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.attributeName=r,this.delegate=n,this.elementObserver=new q(t,this)}return(0,c.default)(e,[{key:"element",get:function(){return this.elementObserver.element}},{key:"selector",get:function(){return"[".concat(this.attributeName,"]")}},{key:"start",value:function(){this.elementObserver.start()}},{key:"pause",value:function(e){this.elementObserver.pause(e)}},{key:"stop",value:function(){this.elementObserver.stop()}},{key:"refresh",value:function(){this.elementObserver.refresh()}},{key:"started",get:function(){return this.elementObserver.started}},{key:"matchElement",value:function(e){return e.hasAttribute(this.attributeName)}},{key:"matchElementsInTree",value:function(e){var t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)}},{key:"elementMatched",value:function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}},{key:"elementUnmatched",value:function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}},{key:"elementAttributeChanged",value:function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}]),e}(),z=function(){"use strict";function e(t,r){var n=this;(0,o.default)(this,e),this.element=t,this.delegate=r,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((function(e){return n.processMutations(e)}))}return(0,c.default)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}},{key:"stop",value:function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}},{key:"refresh",value:function(){var e=!0,t=!1,r=void 0;if(this.started)try{for(var n,s=this.knownAttributeNames[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var i=n.value;this.refreshAttribute(i,null)}}catch(e){t=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}}},{key:"processMutations",value:function(e){var t=!0,r=!1,n=void 0;if(this.started)try{for(var s,i=e[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var a=s.value;this.processMutation(a)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"processMutation",value:function(e){var t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}},{key:"refreshAttribute",value:function(e,t){var r=this.delegate.getStringMapKeyForAttribute(e);if(null!=r){this.stringMap.has(e)||this.stringMapKeyAdded(r,e);var n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,r,t),null==n){var s=this.stringMap.get(e);this.stringMap.delete(e),s&&this.stringMapKeyRemoved(r,e,s)}else this.stringMap.set(e,n)}}},{key:"stringMapKeyAdded",value:function(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}},{key:"stringMapValueChanged",value:function(e,t,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,r)}},{key:"stringMapKeyRemoved",value:function(e,t,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,r)}},{key:"knownAttributeNames",get:function(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}},{key:"currentAttributeNames",get:function(){return Array.from(this.element.attributes).map((function(e){return e.name}))}},{key:"recordedAttributeNames",get:function(){return Array.from(this.stringMap.keys())}}]),e}();function K(e,t,r){G(e,t).add(r)}function V(e,t,r){G(e,t).delete(r),H(e,t)}function G(e,t){var r=e.get(t);return r||(r=new Set,e.set(t,r)),r}function H(e,t){var r=e.get(t);null!=r&&0==r.size&&e.delete(t)}var W=function(){"use strict";function e(){(0,o.default)(this,e),this.valuesByKey=new Map}return(0,c.default)(e,[{key:"keys",get:function(){return Array.from(this.valuesByKey.keys())}},{key:"values",get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e.concat(Array.from(t))}),[])}},{key:"size",get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e+t.size}),0)}},{key:"add",value:function(e,t){K(this.valuesByKey,e,t)}},{key:"delete",value:function(e,t){V(this.valuesByKey,e,t)}},{key:"has",value:function(e,t){var r=this.valuesByKey.get(e);return null!=r&&r.has(t)}},{key:"hasKey",value:function(e){return this.valuesByKey.has(e)}},{key:"hasValue",value:function(e){return Array.from(this.valuesByKey.values()).some((function(t){return t.has(e)}))}},{key:"getValuesForKey",value:function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]}},{key:"getKeysForValue",value:function(e){return Array.from(this.valuesByKey).filter((function(t){var r=(0,g.default)(t,2);r[0];return r[1].has(e)})).map((function(e){var t=(0,g.default)(e,2),r=t[0];t[1];return r}))}}]),e}(),J=function(e){"use strict";(0,y.default)(r,e);var t=(0,E.default)(r);function r(){var e;return(0,o.default)(this,r),(e=t.call(this)).keysByValue=new Map,e}return(0,c.default)(r,[{key:"values",get:function(){return Array.from(this.keysByValue.keys())}},{key:"add",value:function(e,t){(0,d.default)((0,v.default)(r.prototype),"add",this).call(this,e,t),K(this.keysByValue,t,e)}},{key:"delete",value:function(e,t){(0,d.default)((0,v.default)(r.prototype),"delete",this).call(this,e,t),V(this.keysByValue,t,e)}},{key:"hasValue",value:function(e){return this.keysByValue.has(e)}},{key:"getKeysForValue",value:function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]}}]),r}(W),Y=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.attributeObserver=new U(t,r,this),this.delegate=n,this.tokensByElement=new W}return(0,c.default)(e,[{key:"started",get:function(){return this.attributeObserver.started}},{key:"start",value:function(){this.attributeObserver.start()}},{key:"pause",value:function(e){this.attributeObserver.pause(e)}},{key:"stop",value:function(){this.attributeObserver.stop()}},{key:"refresh",value:function(){this.attributeObserver.refresh()}},{key:"element",get:function(){return this.attributeObserver.element}},{key:"attributeName",get:function(){return this.attributeObserver.attributeName}},{key:"elementMatchedAttribute",value:function(e){this.tokensMatched(this.readTokensForElement(e))}},{key:"elementAttributeValueChanged",value:function(e){var t=(0,g.default)(this.refreshTokensForElement(e),2),r=t[0],n=t[1];this.tokensUnmatched(r),this.tokensMatched(n)}},{key:"elementUnmatchedAttribute",value:function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}},{key:"tokensMatched",value:function(e){var t=this;e.forEach((function(e){return t.tokenMatched(e)}))}},{key:"tokensUnmatched",value:function(e){var t=this;e.forEach((function(e){return t.tokenUnmatched(e)}))}},{key:"tokenMatched",value:function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}},{key:"tokenUnmatched",value:function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}},{key:"refreshTokensForElement",value:function(e){var t,r,n,s=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),a=(t=s,r=i,n=Math.max(t.length,r.length),Array.from({length:n},(function(e,n){return[t[n],r[n]]}))).findIndex((function(e){var t=(0,g.default)(e,2);return!function(e,t){return e&&t&&e.index==t.index&&e.content==t.content}(t[0],t[1])}));return-1==a?[[],[]]:[s.slice(a),i.slice(a)]}},{key:"readTokensForElement",value:function(e){var t=this.attributeName;return function(e,t,r){return e.trim().split(/\s+/).filter((function(e){return e.length})).map((function(e,n){return{element:t,attributeName:r,content:e,index:n}}))}(e.getAttribute(t)||"",e,t)}}]),e}();var X=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.tokenListObserver=new Y(t,r,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return(0,c.default)(e,[{key:"started",get:function(){return this.tokenListObserver.started}},{key:"start",value:function(){this.tokenListObserver.start()}},{key:"stop",value:function(){this.tokenListObserver.stop()}},{key:"refresh",value:function(){this.tokenListObserver.refresh()}},{key:"element",get:function(){return this.tokenListObserver.element}},{key:"attributeName",get:function(){return this.tokenListObserver.attributeName}},{key:"tokenMatched",value:function(e){var t=e.element,r=this.fetchParseResultForToken(e).value;r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}},{key:"tokenUnmatched",value:function(e){var t=e.element,r=this.fetchParseResultForToken(e).value;r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}},{key:"fetchParseResultForToken",value:function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}},{key:"fetchValuesByTokenForElement",value:function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}},{key:"parseToken",value:function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}}}]),e}(),Q=function(){"use strict";function e(t,r){(0,o.default)(this,e),this.context=t,this.delegate=r,this.bindingsByAction=new Map}return(0,c.default)(e,[{key:"start",value:function(){this.valueListObserver||(this.valueListObserver=new X(this.element,this.actionAttribute,this),this.valueListObserver.start())}},{key:"stop",value:function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}},{key:"element",get:function(){return this.context.element}},{key:"identifier",get:function(){return this.context.identifier}},{key:"actionAttribute",get:function(){return this.schema.actionAttribute}},{key:"schema",get:function(){return this.context.schema}},{key:"bindings",get:function(){return Array.from(this.bindingsByAction.values())}},{key:"connectAction",value:function(e){var t=new F(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}},{key:"disconnectAction",value:function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}},{key:"disconnectAllActions",value:function(){var e=this;this.bindings.forEach((function(t){return e.delegate.bindingDisconnected(t)})),this.bindingsByAction.clear()}},{key:"parseValueForToken",value:function(e){var t=P.forToken(e);if(t.identifier==this.identifier)return t}},{key:"elementMatchedValue",value:function(e,t){this.connectAction(t)}},{key:"elementUnmatchedValue",value:function(e,t){this.disconnectAction(t)}}]),e}(),Z=function(){"use strict";function e(t,r){(0,o.default)(this,e),this.context=t,this.receiver=r,this.stringMapObserver=new z(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}return(0,c.default)(e,[{key:"start",value:function(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}},{key:"stop",value:function(){this.stringMapObserver.stop()}},{key:"element",get:function(){return this.context.element}},{key:"controller",get:function(){return this.context.controller}},{key:"getStringMapKeyForAttribute",value:function(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}},{key:"stringMapKeyAdded",value:function(e,t){var r=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,r.writer(this.receiver[e]),r.writer(r.defaultValue))}},{key:"stringMapValueChanged",value:function(e,t,r){var n=this.valueDescriptorNameMap[t];null!==e&&(null===r&&(r=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,r))}},{key:"stringMapKeyRemoved",value:function(e,t,r){var n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),r):this.invokeChangedCallback(e,n.writer(n.defaultValue),r)}},{key:"invokeChangedCallbacksForDefaultValues",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,s=this.valueDescriptors[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var i=n.value,a=i.key,o=i.name,u=i.defaultValue,c=i.writer;null==u||this.controller.data.has(a)||this.invokeChangedCallback(o,c(u),void 0)}}catch(e){t=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}}},{key:"invokeChangedCallback",value:function(e,t,r){var n="".concat(e,"Changed"),s=this.receiver[n];if("function"==typeof s){var i=this.valueDescriptorNameMap[e];try{var a=i.reader(t),o=r;r&&(o=i.reader(r)),s.call(this.receiver,a,o)}catch(e){if(!(e instanceof TypeError))throw e;throw new TypeError('Stimulus Value "'.concat(this.context.identifier,".").concat(i.name,'" - ').concat(e.message))}}}},{key:"valueDescriptors",get:function(){var e=this.valueDescriptorMap;return Object.keys(e).map((function(t){return e[t]}))}},{key:"valueDescriptorNameMap",get:function(){var e=this,t={};return Object.keys(this.valueDescriptorMap).forEach((function(r){var n=e.valueDescriptorMap[r];t[n.name]=n})),t}},{key:"hasValue",value:function(e){var t=this.valueDescriptorNameMap[e],r="has".concat(S(t.name));return this.receiver[r]}}]),e}(),$=function(){"use strict";function e(t,r){(0,o.default)(this,e),this.context=t,this.delegate=r,this.targetsByName=new W}return(0,c.default)(e,[{key:"start",value:function(){this.tokenListObserver||(this.tokenListObserver=new Y(this.element,this.attributeName,this),this.tokenListObserver.start())}},{key:"stop",value:function(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}},{key:"tokenMatched",value:function(e){var t=e.element,r=e.content;this.scope.containsElement(t)&&this.connectTarget(t,r)}},{key:"tokenUnmatched",value:function(e){var t=e.element,r=e.content;this.disconnectTarget(t,r)}},{key:"connectTarget",value:function(e,t){var r,n=this;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),null===(r=this.tokenListObserver)||void 0===r||r.pause((function(){return n.delegate.targetConnected(e,t)})))}},{key:"disconnectTarget",value:function(e,t){var r,n=this;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),null===(r=this.tokenListObserver)||void 0===r||r.pause((function(){return n.delegate.targetDisconnected(e,t)})))}},{key:"disconnectAllTargets",value:function(){var e=!0,t=!1,r=void 0,n=!0,s=!1,i=void 0;try{for(var a,o=this.targetsByName.keys[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;try{for(var c,l=this.targetsByName.getValuesForKey(u)[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){var f=c.value;this.disconnectTarget(f,u)}}catch(e){t=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw r}}}}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}}},{key:"attributeName",get:function(){return"data-".concat(this.context.identifier,"-target")}},{key:"element",get:function(){return this.context.element}},{key:"scope",get:function(){return this.context.scope}}]),e}(),ee=function(){"use strict";function e(t,r){var n=this;(0,o.default)(this,e),this.logDebugActivity=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.identifier,s=n.controller,i=n.element;t=Object.assign({identifier:r,controller:s,element:i},t),n.application.logDebugActivity(n.identifier,e,t)},this.module=t,this.scope=r,this.controller=new t.controllerConstructor(this),this.bindingObserver=new Q(this,this.dispatcher),this.valueObserver=new Z(this,this.controller),this.targetObserver=new $(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(e){this.handleError(e,"initializing controller")}}return(0,c.default)(e,[{key:"connect",value:function(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}},{key:"disconnect",value:function(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}},{key:"application",get:function(){return this.module.application}},{key:"identifier",get:function(){return this.module.identifier}},{key:"schema",get:function(){return this.application.schema}},{key:"dispatcher",get:function(){return this.application.dispatcher}},{key:"element",get:function(){return this.scope.element}},{key:"parentElement",get:function(){return this.element.parentElement}},{key:"handleError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,s=n.identifier,i=n.controller,a=n.element;r=Object.assign({identifier:s,controller:i,element:a},r),this.application.handleError(e,"Error ".concat(t),r)}},{key:"targetConnected",value:function(e,t){this.invokeControllerMethod("".concat(t,"TargetConnected"),e)}},{key:"targetDisconnected",value:function(e,t){this.invokeControllerMethod("".concat(t,"TargetDisconnected"),e)}},{key:"invokeControllerMethod",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s,i=this.controller;"function"==typeof i[e]&&(s=i)[e].apply(s,(0,k.default)(r))}}]),e}();function te(e,t){var r=ne(e);return Array.from(r.reduce((function(e,r){return function(e,t){var r=e[t];return Array.isArray(r)?r:[]}(r,t).forEach((function(t){return e.add(t)})),e}),new Set))}function re(e,t){return ne(e).reduce((function(e,r){var n;return(n=e).push.apply(n,(0,k.default)(function(e,t){var r=e[t];return r?Object.keys(r).map((function(e){return[e,r[e]]})):[]}(r,t))),e}),[])}function ne(e){for(var t=[];e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function se(e){return function(e,t){var r=ae(e),n=function(e,t){return ie(t).reduce((function(r,n){var s=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e,r);if(!n||!("value"in n)){var s=Object.getOwnPropertyDescriptor(t,r).value;return n&&(s.get=n.get||s.get,s.set=n.set||s.set),s}}(e,t,n);return s&&Object.assign(r,(0,f.default)({},n,s)),r}),{})}(e.prototype,t);return Object.defineProperties(r.prototype,n),r}(e,function(e){return te(e,"blessings").reduce((function(t,r){var n=r(e);for(var s in n){var i=t[s]||{};t[s]=Object.assign(i,n[s])}return t}),{})}(e))}var ie="function"==typeof Object.getOwnPropertySymbols?function(e){return(0,k.default)(Object.getOwnPropertyNames(e)).concat((0,k.default)(Object.getOwnPropertySymbols(e)))}:Object.getOwnPropertyNames,ae=function(){var e,t=function(e){function t(){return Reflect.construct(e,arguments,this instanceof t?this.constructor:void 0)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t};try{return(e=t((function(){this.a.call(this)}))).prototype.a=function(){},new e,t}catch(e){return function(e){return function(e){"use strict";(0,y.default)(r,e);var t=(0,E.default)(r);function r(){return(0,o.default)(this,r),t.apply(this,arguments)}return r}(e)}}}();var oe=function(){"use strict";function e(t,r){(0,o.default)(this,e),this.application=t,this.definition=function(e){return{identifier:e.identifier,controllerConstructor:se(e.controllerConstructor)}}(r),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return(0,c.default)(e,[{key:"identifier",get:function(){return this.definition.identifier}},{key:"controllerConstructor",get:function(){return this.definition.controllerConstructor}},{key:"contexts",get:function(){return Array.from(this.connectedContexts)}},{key:"connectContextForScope",value:function(e){var t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}},{key:"disconnectContextForScope",value:function(e){var t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}},{key:"fetchContextForScope",value:function(e){var t=this.contextsByScope.get(e);return t||(t=new ee(this,e),this.contextsByScope.set(e,t)),t}}]),e}(),ue=function(){"use strict";function e(t){(0,o.default)(this,e),this.scope=t}return(0,c.default)(e,[{key:"has",value:function(e){return this.data.has(this.getDataKey(e))}},{key:"get",value:function(e){return this.getAll(e)[0]}},{key:"getAll",value:function(e){var t=this.data.get(this.getDataKey(e))||"";return t.match(/[^\s]+/g)||[]}},{key:"getAttributeName",value:function(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}},{key:"getDataKey",value:function(e){return"".concat(e,"-class")}},{key:"data",get:function(){return this.scope.data}}]),e}(),ce=function(){"use strict";function e(t){(0,o.default)(this,e),this.scope=t}return(0,c.default)(e,[{key:"element",get:function(){return this.scope.element}},{key:"identifier",get:function(){return this.scope.identifier}},{key:"get",value:function(e){var t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}},{key:"set",value:function(e,t){var r=this.getAttributeNameForKey(e);return this.element.setAttribute(r,t),this.get(e)}},{key:"has",value:function(e){var t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}},{key:"delete",value:function(e){if(this.has(e)){var t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}return!1}},{key:"getAttributeNameForKey",value:function(e){return"data-".concat(this.identifier,"-").concat(B(e))}}]),e}(),le=function(){"use strict";function e(t){(0,o.default)(this,e),this.warnedKeysByObject=new WeakMap,this.logger=t}return(0,c.default)(e,[{key:"warn",value:function(e,t,r){var n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(r,e))}}]),e}();function fe(e,t){return"[".concat(e,'~="').concat(t,'"]')}var he=function(){"use strict";function e(t){(0,o.default)(this,e),this.scope=t}return(0,c.default)(e,[{key:"element",get:function(){return this.scope.element}},{key:"identifier",get:function(){return this.scope.identifier}},{key:"schema",get:function(){return this.scope.schema}},{key:"has",value:function(e){return null!=this.find(e)}},{key:"find",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this;return t.reduce((function(e,t){return e||n.findTarget(t)||n.findLegacyTarget(t)}),void 0)}},{key:"findAll",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=this;return t.reduce((function(e,t){return(0,k.default)(e).concat((0,k.default)(n.findAllTargets(t)),(0,k.default)(n.findAllLegacyTargets(t)))}),[])}},{key:"findTarget",value:function(e){var t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}},{key:"findAllTargets",value:function(e){var t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}},{key:"getSelectorForTargetName",value:function(e){return fe(this.schema.targetAttributeForScope(this.identifier),e)}},{key:"findLegacyTarget",value:function(e){var t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}},{key:"findAllLegacyTargets",value:function(e){var t=this,r=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(r).map((function(r){return t.deprecate(r,e)}))}},{key:"getLegacySelectorForTargetName",value:function(e){var t="".concat(this.identifier,".").concat(e);return fe(this.schema.targetAttribute,t)}},{key:"deprecate",value:function(e,t){if(e){var r=this.identifier,n=this.schema.targetAttribute,s=this.schema.targetAttributeForScope(r);this.guide.warn(e,"target:".concat(t),"Please replace ".concat(n,'="').concat(r,".").concat(t,'" with ').concat(s,'="').concat(t,'". ')+"The ".concat(n," attribute is deprecated and will be removed in a future version of Stimulus."))}return e}},{key:"guide",get:function(){return this.scope.guide}}]),e}(),de=function(){"use strict";function e(t,r,n,s){var i=this;(0,o.default)(this,e),this.targets=new he(this),this.classes=new ue(this),this.data=new ce(this),this.containsElement=function(e){return e.closest(i.controllerSelector)===i.element},this.schema=t,this.element=r,this.identifier=n,this.guide=new le(s)}return(0,c.default)(e,[{key:"findElement",value:function(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}},{key:"findAllElements",value:function(e){return(0,k.default)(this.element.matches(e)?[this.element]:[]).concat((0,k.default)(this.queryElements(e).filter(this.containsElement)))}},{key:"queryElements",value:function(e){return Array.from(this.element.querySelectorAll(e))}},{key:"controllerSelector",get:function(){return fe(this.schema.controllerAttribute,this.identifier)}}]),e}(),pe=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),this.element=t,this.schema=r,this.delegate=n,this.valueListObserver=new X(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return(0,c.default)(e,[{key:"start",value:function(){this.valueListObserver.start()}},{key:"stop",value:function(){this.valueListObserver.stop()}},{key:"controllerAttribute",get:function(){return this.schema.controllerAttribute}},{key:"parseValueForToken",value:function(e){var t=e.element,r=e.content,n=this.fetchScopesByIdentifierForElement(t),s=n.get(r);return s||(s=this.delegate.createScopeForElementAndIdentifier(t,r),n.set(r,s)),s}},{key:"elementMatchedValue",value:function(e,t){var r=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,r),1==r&&this.delegate.scopeConnected(t)}},{key:"elementUnmatchedValue",value:function(e,t){var r=this.scopeReferenceCounts.get(t);r&&(this.scopeReferenceCounts.set(t,r-1),1==r&&this.delegate.scopeDisconnected(t))}},{key:"fetchScopesByIdentifierForElement",value:function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}]),e}(),ve=function(){"use strict";function e(t){(0,o.default)(this,e),this.application=t,this.scopeObserver=new pe(this.element,this.schema,this),this.scopesByIdentifier=new W,this.modulesByIdentifier=new Map}return(0,c.default)(e,[{key:"element",get:function(){return this.application.element}},{key:"schema",get:function(){return this.application.schema}},{key:"logger",get:function(){return this.application.logger}},{key:"controllerAttribute",get:function(){return this.schema.controllerAttribute}},{key:"modules",get:function(){return Array.from(this.modulesByIdentifier.values())}},{key:"contexts",get:function(){return this.modules.reduce((function(e,t){return e.concat(t.contexts)}),[])}},{key:"start",value:function(){this.scopeObserver.start()}},{key:"stop",value:function(){this.scopeObserver.stop()}},{key:"loadDefinition",value:function(e){this.unloadIdentifier(e.identifier);var t=new oe(this.application,e);this.connectModule(t)}},{key:"unloadIdentifier",value:function(e){var t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}},{key:"getContextForElementAndIdentifier",value:function(e,t){var r=this.modulesByIdentifier.get(t);if(r)return r.contexts.find((function(t){return t.element==e}))}},{key:"handleError",value:function(e,t,r){this.application.handleError(e,t,r)}},{key:"createScopeForElementAndIdentifier",value:function(e,t){return new de(this.schema,e,t,this.logger)}},{key:"scopeConnected",value:function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}},{key:"scopeDisconnected",value:function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}},{key:"connectModule",value:function(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.connectContextForScope(t)}))}},{key:"disconnectModule",value:function(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.disconnectContextForScope(t)}))}}]),e}(),me={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:function(e){return"data-".concat(e,"-target")}},ye=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me,n=this;(0,o.default)(this,e),this.logger=console,this.debug=!1,this.logDebugActivity=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.debug&&n.logFormattedMessage(e,t,r)},this.element=t,this.schema=r,this.dispatcher=new I(this),this.router=new ve(this)}return(0,c.default)(e,[{key:"start",value:function(){var e=this;return(0,i.default)(A.default.mark((function t(){return A.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(function(){return e()})):e()}));case 2:e.logDebugActivity("application","starting"),e.dispatcher.start(),e.router.start(),e.logDebugActivity("application","start");case 6:case"end":return t.stop()}}),t)})))()}},{key:"stop",value:function(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}},{key:"register",value:function(e,t){this.load({identifier:e,controllerConstructor:t})}},{key:"load",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=this,i=Array.isArray(e)?e:[e].concat((0,k.default)(r));i.forEach((function(e){e.controllerConstructor.shouldLoad&&s.router.loadDefinition(e)}))}},{key:"unload",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=this,i=Array.isArray(e)?e:[e].concat((0,k.default)(r));i.forEach((function(e){return s.router.unloadIdentifier(e)}))}},{key:"controllers",get:function(){return this.router.contexts.map((function(e){return e.controller}))}},{key:"getControllerForElementAndIdentifier",value:function(e,t){var r=this.router.getContextForElementAndIdentifier(e,t);return r?r.controller:null}},{key:"handleError",value:function(e,t,r){var n;this.logger.error("%s\n\n%o\n\n%o",t,e,r),null===(n=window.onerror)||void 0===n||n.call(window,t,"",0,0,e)}},{key:"logFormattedMessage",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=Object.assign({application:this},r),this.logger.groupCollapsed("".concat(e," #").concat(t)),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}}],[{key:"start",value:function(t,r){var n=new e(t,r);return n.start(),n}}]),e}();function _e(e,t){var r,n,s,i=(0,g.default)(e,2),a=i[0],o=i[1];return n="".concat(B((r={controller:t,token:a,typeDefinition:o}).token),"-value"),s=function(e){var t=function(e){var t=ge(e.typeObject.type);if(t){var r=be(e.typeObject.default);if(t!==r){var n=e.controller?"".concat(e.controller,".").concat(e.token):e.token;throw new Error('The specified default value for the Stimulus Value "'.concat(n,'" must match the defined type "').concat(t,'". The provided default value of "').concat(e.typeObject.default,'" is of type "').concat(r,'".'))}return t}}({controller:e.controller,token:e.token,typeObject:e.typeDefinition}),r=be(e.typeDefinition),n=ge(e.typeDefinition),s=t||r||n;if(s)return s;var i=e.controller?"".concat(e.controller,".").concat(e.typeDefinition):e.token;throw new Error('Unknown value type "'.concat(i,'" for "').concat(e.token,'" value'))}(r),{type:s,key:n,name:C(n),get defaultValue(){return function(e){var t=ge(e);if(t)return ke[t];var r=e.default;return void 0!==r?r:e}(r.typeDefinition)},get hasCustomDefaultValue(){return void 0!==be(r.typeDefinition)},reader:we[s],writer:je[s]||je.default}}function ge(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function be(e){switch(void 0===e?"undefined":(0,j.default)(e)){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}var ke={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},we={array:function(e){var t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError('expected value of type "array" but instead got value "'.concat(e,'" of type "').concat(be(t),'"'));return t},boolean:function(e){return!("0"==e||"false"==String(e).toLowerCase())},number:function(e){return Number(e)},object:function(e){var t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError('expected value of type "object" but instead got value "'.concat(e,'" of type "').concat(be(t),'"'));return t},string:function(e){return e}},je={default:function(e){return"".concat(e)},array:xe,object:xe};function xe(e){return JSON.stringify(e)}var Ee=function(){"use strict";function e(t){(0,o.default)(this,e),this.context=t}return(0,c.default)(e,[{key:"application",get:function(){return this.context.application}},{key:"scope",get:function(){return this.context.scope}},{key:"element",get:function(){return this.scope.element}},{key:"identifier",get:function(){return this.scope.identifier}},{key:"targets",get:function(){return this.scope.targets}},{key:"classes",get:function(){return this.scope.classes}},{key:"data",get:function(){return this.scope.data}},{key:"initialize",value:function(){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.target,n=void 0===r?this.element:r,s=t.detail,i=void 0===s?{}:s,a=t.prefix,o=void 0===a?this.identifier:a,u=t.bubbles,c=void 0===u||u,l=t.cancelable,f=void 0===l||l,h=o?"".concat(o,":").concat(e):e,d=new CustomEvent(h,{detail:i,bubbles:c,cancelable:f});return n.dispatchEvent(d),d}}],[{key:"shouldLoad",get:function(){return!0}}]),e}();Ee.blessings=[function(e){return te(e,"classes").reduce((function(e,t){return Object.assign(e,(r=t,n={},(0,f.default)(n,"".concat(r,"Class"),{get:function(){var e=this.classes;if(e.has(r))return e.get(r);var t=e.getAttributeName(r);throw new Error('Missing attribute "'.concat(t,'"'))}}),(0,f.default)(n,"".concat(r,"Classes"),{get:function(){return this.classes.getAll(r)}}),(0,f.default)(n,"has".concat(S(r),"Class"),{get:function(){return this.classes.has(r)}}),n));var r,n}),{})},function(e){return te(e,"targets").reduce((function(e,t){return Object.assign(e,(r=t,n={},(0,f.default)(n,"".concat(r,"Target"),{get:function(){var e=this.targets.find(r);if(e)return e;throw new Error('Missing target element "'.concat(r,'" for "').concat(this.identifier,'" controller'))}}),(0,f.default)(n,"".concat(r,"Targets"),{get:function(){return this.targets.findAll(r)}}),(0,f.default)(n,"has".concat(S(r),"Target"),{get:function(){return this.targets.has(r)}}),n));var r,n}),{})},function(e){var t=re(e,"values"),r={valueDescriptorMap:{get:function(){var e=this;return t.reduce((function(t,r){var n=_e(r,e.identifier),s=e.data.getAttributeNameForKey(n.key);return Object.assign(t,(0,f.default)({},s,n))}),{})}}};return t.reduce((function(e,t){return Object.assign(e,function(e,t){var r,n=_e(e,t),s=n.key,i=n.name,a=n.reader,o=n.writer;return r={},(0,f.default)(r,i,{get:function(){var e=this.data.get(s);return null!==e?a(e):n.defaultValue},set:function(e){void 0===e?this.data.delete(s):this.data.set(s,o(e))}}),(0,f.default)(r,"has".concat(S(i)),{get:function(){return this.data.has(s)||n.hasCustomDefaultValue}}),r}(t))}),r)}],Ee.targets=[],Ee.values={}},{"@swc/helpers/src/_async_to_generator.mjs":"d46FK","@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_define_property.mjs":"gz59H","@swc/helpers/src/_get.mjs":"eHFAS","@swc/helpers/src/_get_prototype_of.mjs":"1gzL0","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_sliced_to_array.mjs":"3lmqd","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","@swc/helpers/src/_type_of.mjs":"hzP4T","@swc/helpers/src/_create_super.mjs":"dJHhu","regenerator-runtime":"achxx","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],d46FK:[function(e,t,r){function n(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return function(){var t=this,r=arguments;return new Promise((function(s,i){var a=e.apply(t,r);function o(e){n(a,s,i,o,u,"next",e)}function u(e){n(a,s,i,o,u,"throw",e)}o(void 0)}))}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"3ieD1":[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach((function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],bcDJH:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],e1EPh:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],gz59H:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],eHFAS:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_super_prop_base.mjs"),i=n.interopDefault(s);function a(e,t,r){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=(0,i.default)(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(r||e):s.value}},a(e,t,r)}r.default=function(e,t,r){return a(e,t,r)}},{"./_super_prop_base.mjs":"1iO0a","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"1iO0a":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_get_prototype_of.mjs"),i=n.interopDefault(s);r.default=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,i.default)(e)););return e}},{"./_get_prototype_of.mjs":"1gzL0","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"1gzL0":[function(e,t,r){function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return n(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],kfOz5:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_set_prototype_of.mjs"),i=n.interopDefault(s);r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,i.default)(e,t)}},{"./_set_prototype_of.mjs":"dS33n","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],dS33n:[function(e,t,r){function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){return n(e,t)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"3lmqd":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_array_with_holes.mjs"),i=n.interopDefault(s),a=e("./_iterable_to_array.mjs"),o=n.interopDefault(a),u=e("./_non_iterable_rest.mjs"),c=n.interopDefault(u),l=e("./_unsupported_iterable_to_array.mjs"),f=n.interopDefault(l);r.default=function(e,t){return(0,i.default)(e)||(0,o.default)(e,t)||(0,f.default)(e,t)||(0,c.default)()}},{"./_array_with_holes.mjs":"bOETF","./_iterable_to_array.mjs":"5xef1","./_non_iterable_rest.mjs":"fd7AC","./_unsupported_iterable_to_array.mjs":"9fTEq","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],bOETF:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){if(Array.isArray(e))return e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"5xef1":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],fd7AC:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"9fTEq":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_array_like_to_array.mjs"),i=n.interopDefault(s);r.default=function(e,t){if(e){if("string"==typeof e)return(0,i.default)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,i.default)(e,t):void 0}}},{"./_array_like_to_array.mjs":"aqJWY","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],aqJWY:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],lp3rF:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_array_without_holes.mjs"),i=n.interopDefault(s),a=e("./_iterable_to_array.mjs"),o=n.interopDefault(a),u=e("./_non_iterable_spread.mjs"),c=n.interopDefault(u),l=e("./_unsupported_iterable_to_array.mjs"),f=n.interopDefault(l);r.default=function(e){return(0,i.default)(e)||(0,o.default)(e)||(0,f.default)(e)||(0,c.default)()}},{"./_array_without_holes.mjs":"lOgiP","./_iterable_to_array.mjs":"5xef1","./_non_iterable_spread.mjs":"3W2Gw","./_unsupported_iterable_to_array.mjs":"9fTEq","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],lOgiP:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_array_like_to_array.mjs"),i=n.interopDefault(s);r.default=function(e){if(Array.isArray(e))return(0,i.default)(e)}},{"./_array_like_to_array.mjs":"aqJWY","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"3W2Gw":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],hzP4T:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],dJHhu:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_is_native_reflect_construct.mjs"),i=n.interopDefault(s),a=e("./_get_prototype_of.mjs"),o=n.interopDefault(a),u=e("./_possible_constructor_return.mjs"),c=n.interopDefault(u);r.default=function(e){var t=(0,i.default)();return function(){var r,n=(0,o.default)(e);if(t){var s=(0,o.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}},{"./_is_native_reflect_construct.mjs":"cyOXh","./_get_prototype_of.mjs":"1gzL0","./_possible_constructor_return.mjs":"gDAp7","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],cyOXh:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],gDAp7:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_assert_this_initialized.mjs"),i=n.interopDefault(s),a=e("./_type_of.mjs"),o=n.interopDefault(a);r.default=function(e,t){return!t||"object"!==(0,o.default)(t)&&"function"!=typeof t?(0,i.default)(e):t}},{"./_assert_this_initialized.mjs":"1hTTt","./_type_of.mjs":"hzP4T","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"1hTTt":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],achxx:[function(e,t,r){var n=function(e){"use strict";var t,r=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]},n=function(e,t,r,n){var s=t&&t.prototype instanceof i?t:i,a=Object.create(s.prototype),o=new d(n||[]);return a._invoke=l(e,r,o),a},s=function(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}},i=function(){},a=function(){},o=function(){},u=function(e){["next","throw","return"].forEach((function(t){r(e,t,(function(e){return this._invoke(t,e)}))}))},c=function(e,t){function r(n,i,a,o){var u=s(e[n],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&y.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,o)}),(function(e){r("throw",e,a,o)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,o)}))}o(u.arg)}var n;this._invoke=function(e,s){function i(){return new t((function(t,n){r(e,s,t,n)}))}return n=n?n.then(i,i):i()}},l=function(e,t,r){var n=w;return function(i,a){if(n===x)throw new Error("Generator is already running");if(n===E){if("throw"===i)throw a;return v()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var u=T(o,r);if(u){if(u===D)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===w)throw n=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=x;var c=s(e,t,r);if("normal"===c.type){if(n=r.done?E:j,c.arg===D)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=E,r.method="throw",r.arg=c.arg)}}},f=function(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)},h=function(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t},d=function(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)},p=function(e){if(e){var r=e[g];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function r(){for(;++n<e.length;)if(y.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:v}},v=function(){return{value:t,done:!0}},m=Object.prototype,y=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},g=_.iterator||"@@iterator",b=_.asyncIterator||"@@asyncIterator",k=_.toStringTag||"@@toStringTag";try{r({},"")}catch(e){r=function(e,t,r){return e[t]=r}}e.wrap=n;var w="suspendedStart",j="suspendedYield",x="executing",E="completed",D={},A={};r(A,g,(function(){return this}));var O=Object.getPrototypeOf,I=O&&O(O(p([])));I&&I!==m&&y.call(I,g)&&(A=I);var R=o.prototype=i.prototype=Object.create(A);function T(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return D;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var i=s(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,D;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,D):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,D)}return a.prototype=o,r(R,"constructor",o),r(o,"constructor",a),a.displayName=r(o,k,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,r(e,k,"GeneratorFunction")),e.prototype=Object.create(R),e},e.awrap=function(e){return{__await:e}},u(c.prototype),r(c.prototype,b,(function(){return this})),e.AsyncIterator=c,e.async=function(t,r,s,i,a){void 0===a&&(a=Promise);var o=new c(n(t,r,s,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},u(R),r(R,k,"Generator"),r(R,g,(function(){return this})),r(R,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(h),!e)for(var r in this)"t"===r.charAt(0)&&y.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){var r=function(r,s){return a.type="throw",a.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s};if(this.done)throw e;for(var n=this,s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),u=y.call(i,"finallyLoc");if(o&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,D):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var s=n.arg;h(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:p(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),D}},e}(t.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},{}],"2Z9zf":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return j}));var s=e("@swc/helpers/src/_assert_this_initialized.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_class_call_check.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_class_private_field_get.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_class_private_field_init.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_create_class.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_define_property.mjs"),v=n.interopDefault(p),m=e("@swc/helpers/src/_inherits.mjs"),y=n.interopDefault(m),_=e("@swc/helpers/src/_create_super.mjs"),g=n.interopDefault(_),b=e("@hotwired/stimulus"),k=e("buffer").Buffer,w=new WeakMap,j=function(e){"use strict";(0,y.default)(r,e);var t=(0,g.default)(r);function r(){var e;return(0,o.default)(this,r),e=t.apply(this,arguments),(0,f.default)((0,i.default)(e),w,{get:x,set:void 0}),e}return(0,d.default)(r,[{key:"start",value:function(){var e=new URL("https://www.reddit.com/api/v1/authorize.compact"),t=(0,c.default)(this,w);console.log(t),document.cookie="authorization_state=".concat(t),e.searchParams.append("client_id","WUsmJjSSfPholQRih6D2Rw"),e.searchParams.append("response_type","token"),e.searchParams.append("state",t),e.searchParams.append("redirect_uri","https://rnuke.github.io/start"),e.searchParams.append("duration","temporary"),e.searchParams.append("scope","identity edit history"),window.location.href=e.href}}]),r}(b.Controller);function x(){var e={nonce:Math.random().toString(36).slice(2),comments:this.commentsTarget.checked,posts:this.postsTarget.checked,period:this.periodTarget.value,number:this.numberTarget.value};return k.from(JSON.stringify(e)).toString("base64")}(0,v.default)(j,"targets",["comments","posts","selection","number","period"])},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_create_super.mjs":"dJHhu","@hotwired/stimulus":"51pPy","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1","@swc/helpers/src/_assert_this_initialized.mjs":"1hTTt","@swc/helpers/src/_class_private_field_get.mjs":"ax2sY","@swc/helpers/src/_class_private_field_init.mjs":"eHYn6","@swc/helpers/src/_define_property.mjs":"gz59H",buffer:"bzMHD"}],ax2sY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_class_extract_field_descriptor.mjs"),i=n.interopDefault(s),a=e("./_class_apply_descriptor_get.mjs"),o=n.interopDefault(a);r.default=function(e,t){var r=(0,i.default)(e,t,"get");return(0,o.default)(e,r)}},{"./_class_extract_field_descriptor.mjs":"1mE6X","./_class_apply_descriptor_get.mjs":"6CTks","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"1mE6X":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"6CTks":[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){return t.get?t.get.call(e):t.value}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],eHYn6:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_check_private_redeclaration.mjs"),i=n.interopDefault(s);r.default=function(e,t,r){(0,i.default)(e,t),t.set(e,r)}},{"./_check_private_redeclaration.mjs":"Q5RWi","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],Q5RWi:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],bzMHD:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),s=e("@swc/helpers/src/_assert_this_initialized.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_class_call_check.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_create_class.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_inherits.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_type_of.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_create_super.mjs"),v=n.interopDefault(p),m=e("base64-js"),y=e("ieee754"),_="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=k,r.SlowBuffer=function(e){+e!=e&&(e=0);return k.alloc(+e)},r.INSPECT_MAX_BYTES=50;var g=2147483647;function b(e){if(e>g)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,k.prototype),t}function k(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return x(e)}return w(e,t,r)}function w(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!k.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|O(e,t),n=b(r),s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ue(e,Uint8Array)){var t=new Uint8Array(e);return D(t.buffer,t.byteOffset,t.byteLength)}return E(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,d.default)(e)));if(ue(e,ArrayBuffer)||e&&ue(e.buffer,ArrayBuffer))return D(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(ue(e,SharedArrayBuffer)||e&&ue(e.buffer,SharedArrayBuffer)))return D(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return k.from(n,t,r);var s=function(e){if(k.isBuffer(e)){var t=0|A(e.length),r=b(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||ce(e.length)?b(0):E(e);if("Buffer"===e.type&&Array.isArray(e.data))return E(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return k.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,d.default)(e)))}function j(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function x(e){return j(e),b(e<0?0:0|A(e))}function E(e){for(var t=e.length<0?0:0|A(e.length),r=b(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function D(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,k.prototype),n}function A(e){if(e>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return 0|e}function O(e,t){if(k.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ue(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===e?"undefined":(0,d.default)(e)));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ie(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ae(e).length;default:if(s)return n?-1:ie(e).length;t=(""+t).toLowerCase(),s=!0}}function I(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return K(this,t,r);case"utf8":case"utf-8":return F(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return z(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function R(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function T(e,t,r,n,s){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),ce(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=k.from(t,n)),k.isBuffer(t))return 0===t.length?-1:C(e,t,r,n,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):C(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function C(e,t,r,n,s){var i,a=function(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)},o=1,u=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,u/=2,c/=2,r/=2}if(s){var l=-1;for(i=r;i<u;i++)if(a(e,i)===a(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*o}else-1!==l&&(i-=i-l),l=-1}else for(r+c>u&&(r=u-c),i=r;i>=0;i--){for(var f=!0,h=0;h<c;h++)if(a(e,i+h)!==a(t,h)){f=!1;break}if(f)return i}return-1}function S(e,t,r,n){r=Number(r)||0;var s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;var i,a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){var o=parseInt(t.substr(2*i,2),16);if(ce(o))return i;e[r+i]=o}return i}function B(e,t,r,n){return oe(ie(t,e.length-r),e,r,n)}function P(e,t,r,n){return oe(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function L(e,t,r,n){return oe(ae(t),e,r,n)}function M(e,t,r,n){return oe(function(e,t){for(var r,n,s,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,s=r%256,i.push(s),i.push(n);return i}(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?m.fromByteArray(e):m.fromByteArray(e.slice(t,r))}function F(e,t,r){r=Math.min(e.length,r);for(var n=[],s=t;s<r;){var i=e[s],a=null,o=i>239?4:i>223?3:i>191?2:1;if(s+o<=r){var u=void 0,c=void 0,l=void 0,f=void 0;switch(o){case 1:i<128&&(a=i);break;case 2:128==(192&(u=e[s+1]))&&(f=(31&i)<<6|63&u)>127&&(a=f);break;case 3:u=e[s+1],c=e[s+2],128==(192&u)&&128==(192&c)&&(f=(15&i)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[s+1],c=e[s+2],l=e[s+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),s+=o}return function(e){var t=e.length;if(t<=q)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=q));return r}(n)}r.kMaxLength=g,k.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),k.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(k.prototype,"parent",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.buffer}}),Object.defineProperty(k.prototype,"offset",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.byteOffset}}),k.poolSize=8192,k.from=function(e,t,r){return w(e,t,r)},Object.setPrototypeOf(k.prototype,Uint8Array.prototype),Object.setPrototypeOf(k,Uint8Array),k.alloc=function(e,t,r){return function(e,t,r){return j(e),e<=0?b(e):void 0!==t?"string"==typeof r?b(e).fill(t,r):b(e).fill(t):b(e)}(e,t,r)},k.allocUnsafe=function(e){return x(e)},k.allocUnsafeSlow=function(e){return x(e)},k.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==k.prototype},k.compare=function(e,t){if(ue(e,Uint8Array)&&(e=k.from(e,e.offset,e.byteLength)),ue(t,Uint8Array)&&(t=k.from(t,t.offset,t.byteLength)),!k.isBuffer(e)||!k.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},k.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},k.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return k.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=k.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(ue(i,Uint8Array))s+i.length>n.length?(k.isBuffer(i)||(i=k.from(i)),i.copy(n,s)):Uint8Array.prototype.set.call(n,i,s);else{if(!k.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s)}s+=i.length}return n},k.byteLength=O,k.prototype._isBuffer=!0,k.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)R(this,t,t+1);return this},k.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)R(this,t,t+3),R(this,t+1,t+2);return this},k.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)R(this,t,t+7),R(this,t+1,t+6),R(this,t+2,t+5),R(this,t+3,t+4);return this},k.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?F(this,0,e):I.apply(this,arguments)},k.prototype.toLocaleString=k.prototype.toString,k.prototype.equals=function(e){if(!k.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===k.compare(this,e)},k.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},_&&(k.prototype[_]=k.prototype.inspect),k.prototype.compare=function(e,t,r,n,s){if(ue(e,Uint8Array)&&(e=k.from(e,e.offset,e.byteLength)),!k.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===e?"undefined":(0,d.default)(e)));if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(s>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(i,a),u=this.slice(n,s),c=e.slice(t,r),l=0;l<o;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},k.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},k.prototype.indexOf=function(e,t,r){return T(this,e,t,r,!0)},k.prototype.lastIndexOf=function(e,t,r){return T(this,e,t,r,!1)},k.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return S(this,e,t,r);case"utf8":case"utf-8":return B(this,e,t,r);case"ascii":case"latin1":case"binary":return P(this,e,t,r);case"base64":return L(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function U(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}function z(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function K(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=t;i<r;++i)s+=le[e[i]];return s}function V(e,t,r){for(var n=e.slice(t,r),s="",i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+256*n[i+1]);return s}function G(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function H(e,t,r,n,s,i){if(!k.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function W(e,t,r,n,s){te(t,n,s,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function J(e,t,r,n,s){te(t,n,s,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function Y(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function X(e,t,r,n,s){return t=+t,r>>>=0,s||Y(e,0,r,4),y.write(e,t,r,n,23,4),r+4}function Q(e,t,r,n,s){return t=+t,r>>>=0,s||Y(e,0,r,8),y.write(e,t,r,n,52,8),r+8}k.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,k.prototype),n},k.prototype.readUintLE=k.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||G(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n},k.prototype.readUintBE=k.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||G(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n},k.prototype.readUint8=k.prototype.readUInt8=function(e,t){return e>>>=0,t||G(e,1,this.length),this[e]},k.prototype.readUint16LE=k.prototype.readUInt16LE=function(e,t){return e>>>=0,t||G(e,2,this.length),this[e]|this[e+1]<<8},k.prototype.readUint16BE=k.prototype.readUInt16BE=function(e,t){return e>>>=0,t||G(e,2,this.length),this[e]<<8|this[e+1]},k.prototype.readUint32LE=k.prototype.readUInt32LE=function(e,t){return e>>>=0,t||G(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},k.prototype.readUint32BE=k.prototype.readUInt32BE=function(e,t){return e>>>=0,t||G(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},k.prototype.readBigUInt64LE=fe((function(e){re(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||ne(e,this.length-8);var n=t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24),s=this[++e]+256*this[++e]+65536*this[++e]+r*Math.pow(2,24);return BigInt(n)+(BigInt(s)<<BigInt(32))})),k.prototype.readBigUInt64BE=fe((function(e){re(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||ne(e,this.length-8);var n=t*Math.pow(2,24)+65536*this[++e]+256*this[++e]+this[++e],s=this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(s)})),k.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||G(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},k.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||G(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},k.prototype.readInt8=function(e,t){return e>>>=0,t||G(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},k.prototype.readInt16LE=function(e,t){e>>>=0,t||G(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},k.prototype.readInt16BE=function(e,t){e>>>=0,t||G(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},k.prototype.readInt32LE=function(e,t){return e>>>=0,t||G(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},k.prototype.readInt32BE=function(e,t){return e>>>=0,t||G(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},k.prototype.readBigInt64LE=fe((function(e){re(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||ne(e,this.length-8);var n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*Math.pow(2,24))})),k.prototype.readBigInt64BE=fe((function(e){re(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||ne(e,this.length-8);var n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+65536*this[++e]+256*this[++e]+r)})),k.prototype.readFloatLE=function(e,t){return e>>>=0,t||G(e,4,this.length),y.read(this,e,!0,23,4)},k.prototype.readFloatBE=function(e,t){return e>>>=0,t||G(e,4,this.length),y.read(this,e,!1,23,4)},k.prototype.readDoubleLE=function(e,t){return e>>>=0,t||G(e,8,this.length),y.read(this,e,!0,52,8)},k.prototype.readDoubleBE=function(e,t){return e>>>=0,t||G(e,8,this.length),y.read(this,e,!1,52,8)},k.prototype.writeUintLE=k.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||H(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},k.prototype.writeUintBE=k.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||H(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},k.prototype.writeUint8=k.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,1,255,0),this[t]=255&e,t+1},k.prototype.writeUint16LE=k.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},k.prototype.writeUint16BE=k.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},k.prototype.writeUint32LE=k.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},k.prototype.writeUint32BE=k.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},k.prototype.writeBigUInt64LE=fe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return W(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),k.prototype.writeBigUInt64BE=fe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return J(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),k.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);H(this,e,t,r,s-1,-s)}var i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},k.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);H(this,e,t,r,s-1,-s)}var i=r-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+r},k.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},k.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},k.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},k.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},k.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||H(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},k.prototype.writeBigInt64LE=fe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return W(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),k.prototype.writeBigInt64BE=fe((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return J(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),k.prototype.writeFloatLE=function(e,t,r){return X(this,e,t,!0,r)},k.prototype.writeFloatBE=function(e,t,r){return X(this,e,t,!1,r)},k.prototype.writeDoubleLE=function(e,t,r){return Q(this,e,t,!0,r)},k.prototype.writeDoubleBE=function(e,t,r){return Q(this,e,t,!1,r)},k.prototype.copy=function(e,t,r,n){if(!k.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},k.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!k.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=k.isBuffer(e)?e:k.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%o]}return this};var Z={};function $(e,t,r){Z[e]=function(r){(0,f.default)(s,r);var n=(0,v.default)(s);function s(){var r;return(0,o.default)(this,s),r=n.call(this),Object.defineProperty((0,i.default)(r),"message",{value:t.apply((0,i.default)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return(0,c.default)(s,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),s}(r)}function ee(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function te(e,t,r,n,s,i){if(e>r||e<t){var a,o="bigint"===(void 0===t?"undefined":(0,d.default)(t))?"n":"";throw a=i>3?0===t||t===BigInt(0)?">= 0".concat(o," and < 2").concat(o," ** ").concat(8*(i+1)).concat(o):">= -(2".concat(o," ** ").concat(8*(i+1)-1).concat(o,") and < 2 ** ")+"".concat(8*(i+1)-1).concat(o):">= ".concat(t).concat(o," and <= ").concat(r).concat(o),new Z.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,r){re(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||ne(t,e.length-(r+1))}(n,s,i)}function re(e,t){if("number"!=typeof e)throw new Z.ERR_INVALID_ARG_TYPE(t,"number",e)}function ne(e,t,r){if(Math.floor(e)!==e)throw re(e,r),new Z.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new Z.ERR_BUFFER_OUT_OF_BOUNDS;throw new Z.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(void 0===t?"undefined":(0,d.default)(t))}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),s=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?s=ee(String(r)):"bigint"===(void 0===r?"undefined":(0,d.default)(r))&&(s=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(s=ee(s)),s+="n"),n+=" It must be ".concat(t,". Received ").concat(s)}),RangeError);var se=/[^+/0-9A-Za-z-_]/g;function ie(e,t){var r;t=t||1/0;for(var n=e.length,s=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function ae(e){return m.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function oe(e,t,r,n){var s;for(s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function ue(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ce(e){return e!=e}var le=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,s=0;s<16;++s)t[n+s]=e[r]+e[s];return t}();function fe(e){return"undefined"==typeof BigInt?he:e}function he(){throw new Error("BigInt not supported")}},{"@swc/helpers/src/_assert_this_initialized.mjs":"1hTTt","@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_type_of.mjs":"hzP4T","@swc/helpers/src/_create_super.mjs":"dJHhu","base64-js":"9dgvu",ieee754:"6l3tO","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"9dgvu":[function(e,t,r){"use strict";r.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=c(e),a=n[0],o=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,o)),l=0,f=o>0?a-4:a;for(r=0;r<f;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},r.fromByteArray=function(e){for(var t,r=e.length,s=r%3,i=[],a=16383,o=0,u=r-s;o<u;o+=a)i.push(l(e,o,o+a>u?u:o+a));1===s?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===s&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=a.length;o<u;++o)n[o]=a[o],s[a.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var s,i,a=[],o=t;o<r;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(n[(i=s)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],"6l3tO":[function(e,t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */r.read=function(e,t,r,n,s){var i,a,o=8*s-n-1,u=(1<<o)-1,c=u>>1,l=-7,f=r?s-1:0,h=r?-1:1,d=e[t+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=o;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=c}return(d?-1:1)*a*Math.pow(2,i-n)},r.write=function(e,t,r,n,s,i){var a,o,u,c=8*i-s-1,l=(1<<c)-1,f=l>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(o=0,a=l):a+f>=1?(o=(t*u-1)*Math.pow(2,s),a+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[r+d]=255&o,d+=p,o/=256,s-=8);for(a=a<<s|o,c+=s;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*v}},{}],bRnoY:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return K}));var s=e("@swc/helpers/src/_assert_this_initialized.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_async_to_generator.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_class_call_check.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_class_private_field_get.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_class_private_field_init.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_class_private_field_set.mjs"),v=n.interopDefault(p),m=e("@swc/helpers/src/_class_private_method_get.mjs"),y=n.interopDefault(m),_=e("@swc/helpers/src/_class_private_method_init.mjs"),g=n.interopDefault(_),b=e("@swc/helpers/src/_create_class.mjs"),k=n.interopDefault(b),w=e("@swc/helpers/src/_inherits.mjs"),j=n.interopDefault(w),x=e("@swc/helpers/src/_to_array.mjs"),E=n.interopDefault(x),D=e("@swc/helpers/src/_create_super.mjs"),A=n.interopDefault(D),O=e("regenerator-runtime"),I=n.interopDefault(O),R=e("@hotwired/stimulus"),T=e("./nuke_controller/client"),C=n.interopDefault(T),S=e("./nuke_controller/commentHandler"),B=n.interopDefault(S),P=e("./nuke_controller/postHandler"),L=n.interopDefault(P),M=e("buffer").Buffer,N=new WeakMap,F=new WeakMap,q=new WeakMap,U=new WeakSet,z=new WeakMap,K=function(e){"use strict";(0,j.default)(r,e);var t=(0,A.default)(r);function r(){var e;return(0,c.default)(this,r),e=t.apply(this,arguments),(0,d.default)((0,i.default)(e),N,{get:V,set:void 0}),(0,d.default)((0,i.default)(e),F,{get:G,set:void 0}),(0,d.default)((0,i.default)(e),q,{get:H,set:void 0}),(0,g.default)((0,i.default)(e),U),(0,d.default)((0,i.default)(e),z,{get:void 0,set:J}),e}return(0,k.default)(r,[{key:"connect",value:function(){var e=this;return(0,o.default)(I.default.mark((function t(){var r,n,s,i;return I.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,y.default)(e,U,W).call(e,"authorization_state")==(0,f.default)(e,N).get("state")){t.next=2;break}throw new Error("Unable to verify authorization request");case 2:return r=new(0,C.default)((0,f.default)(e,N).get("access_token")),t.next=5,r.getUser((function(e){return e.name}));case 5:if(n=t.sent,!(0,f.default)(e,F).posts){t.next=14;break}return(0,v.default)(e,z,"Loading Posts"),s=new(0,L.default)(r,n,(0,f.default)(e,q)),t.next=11,s.loadItems();case 11:return(0,v.default)(e,z,"Deleting Posts"),t.next=14,s.nuke();case 14:if(!(0,f.default)(e,F).comments){t.next=22;break}return(0,v.default)(e,z,"Loading Comments"),i=new(0,B.default)(r,n,(0,f.default)(e,q)),t.next=19,i.loadItems();case 19:return(0,v.default)(e,z,"Deleting Comments"),t.next=22,i.nuke();case 22:(0,v.default)(e,z,"Done!"),document.getElementById("loading").classList.remove("loading");case 24:case"end":return t.stop()}}),t)})))()}}]),r}(R.Controller);function V(){var e=window.location.hash.replace("#","?");return new URLSearchParams(e)}function G(){return JSON.parse(M.from((0,f.default)(this,N).get("state"),"base64").toString("utf-8"))}function H(){var e=Math.min(Math.max(parseInt((0,f.default)(this,F).number),1),5),t=(0,f.default)(this,F).period;if(e){var r;switch(t){case"hours":r=3600*e;break;case"days":r=86400*e;break;case"weeks":r=604800*e;break;default:return}return Math.round(Date.now()/1e3)-r}}function W(e){var t={};return document.cookie.split(";").forEach((function(e){var r=(0,E.default)(e.split("=")),n=r[0],s=r.slice(1).join("=");t[n.trim()]=s})),t[e]}function J(e){document.getElementById("loading").textContent=e}},{"@swc/helpers/src/_assert_this_initialized.mjs":"1hTTt","@swc/helpers/src/_async_to_generator.mjs":"d46FK","@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_class_private_field_get.mjs":"ax2sY","@swc/helpers/src/_class_private_field_init.mjs":"eHYn6","@swc/helpers/src/_class_private_field_set.mjs":"kiiWA","@swc/helpers/src/_class_private_method_get.mjs":"aKsR1","@swc/helpers/src/_class_private_method_init.mjs":"6V8Bd","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_create_super.mjs":"dJHhu","regenerator-runtime":"achxx","@hotwired/stimulus":"51pPy","./nuke_controller/client":"4lDFi","./nuke_controller/commentHandler":"5dFWu","./nuke_controller/postHandler":"eVPMF","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1","@swc/helpers/src/_to_array.mjs":"enz6T",buffer:"bzMHD"}],kiiWA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_class_extract_field_descriptor.mjs"),i=n.interopDefault(s),a=e("./_class_apply_descriptor_set.mjs"),o=n.interopDefault(a);r.default=function(e,t,r){var n=(0,i.default)(e,t,"set");return(0,o.default)(e,n,r),r}},{"./_class_extract_field_descriptor.mjs":"1mE6X","./_class_apply_descriptor_set.mjs":"iXbpF","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],iXbpF:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],aKsR1:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"6V8Bd":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_check_private_redeclaration.mjs"),i=n.interopDefault(s);r.default=function(e,t){(0,i.default)(e,t),t.add(e)}},{"./_check_private_redeclaration.mjs":"Q5RWi","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"4lDFi":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return g}));var s=e("@swc/helpers/src/_async_to_generator.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_class_call_check.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_class_private_method_get.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_class_private_method_init.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_create_class.mjs"),d=n.interopDefault(h),p=e("regenerator-runtime"),v=n.interopDefault(p),m=e("bottleneck"),y=new(0,n.interopDefault(m).default)({minTime:1e3}).wrap(fetch),_=new WeakSet,g=function(){"use strict";function e(t){(0,o.default)(this,e),(0,f.default)(this,_),this.token=t}return(0,d.default)(e,[{key:"getUser",value:function(e){var t=this;return(0,i.default)(v.default.mark((function r(){return v.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.default)(t,_,b).call(t,{url:"https://oauth.reddit.com/api/v1/me",method:"GET",callback:e}));case 1:case"end":return r.stop()}}),r)})))()}},{key:"getComments",value:function(e,t,r){var n=this;return(0,i.default)(v.default.mark((function s(){return v.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.default)(n,_,b).call(n,{url:"https://oauth.reddit.com/user/".concat(e,"/comments"),method:"GET",params:t,callback:r}));case 1:case"end":return s.stop()}}),s)})))()}},{key:"getPosts",value:function(e,t,r){var n=this;return(0,i.default)(v.default.mark((function s(){return v.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.default)(n,_,b).call(n,{url:"https://oauth.reddit.com/user/".concat(e,"/submitted"),method:"GET",params:t,callback:r}));case 1:case"end":return s.stop()}}),s)})))()}},{key:"editComment",value:function(e,t,r){var n=this;return(0,i.default)(v.default.mark((function s(){return v.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.default)(n,_,b).call(n,{url:"https://oauth.reddit.com/api/editusertext",method:"POST",params:{thing_id:"t1_".concat(e),text:t,api_type:"json"},callback:r}));case 1:case"end":return s.stop()}}),s)})))()}},{key:"deleteComment",value:function(e,t){var r=this;return(0,i.default)(v.default.mark((function n(){return v.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.default)(r,_,b).call(r,{url:"https://oauth.reddit.com/api/del",method:"POST",params:{id:"t1_".concat(e)},callback:t}));case 1:case"end":return n.stop()}}),n)})))()}},{key:"editPost",value:function(e,t,r){var n=this;return(0,i.default)(v.default.mark((function s(){return v.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,c.default)(n,_,b).call(n,{url:"https://oauth.reddit.com/api/editusertext",method:"POST",params:{thing_id:"t3_".concat(e),text:t,api_type:"json"},callback:r}));case 1:case"end":return s.stop()}}),s)})))()}},{key:"deletePost",value:function(e,t){var r=this;return(0,i.default)(v.default.mark((function n(){return v.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.default)(r,_,b).call(r,{url:"https://oauth.reddit.com/api/del",method:"POST",params:{id:"t3_".concat(e)},callback:t}));case 1:case"end":return n.stop()}}),n)})))()}}]),e}();function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.method,n=e.params,s=e.callback,i=new Headers;i.append("Authorization","Bearer ".concat(this.token," ")),i.append("Content-Type","application/json");var a={method:r,headers:i},o=new URL(t);for(var u in n)o.searchParams.append(u,n[u]);return y(o.href,a).then((function(e){return e.json()})).catch((function(e){return console.error(e)})).then((function(e){return"function"==typeof s&&s(e)}))}},{"@swc/helpers/src/_async_to_generator.mjs":"d46FK","@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_class_private_method_get.mjs":"aKsR1","@swc/helpers/src/_class_private_method_init.mjs":"6V8Bd","@swc/helpers/src/_create_class.mjs":"e1EPh","regenerator-runtime":"achxx",bottleneck:"d83S1","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],d83S1:[function(e,t,r){"use strict";t.exports=e("./Bottleneck")},{"./Bottleneck":"7ZDSs"}],"7ZDSs":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js"),s=e("@swc/helpers/src/_class_call_check.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_create_class.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_to_consumable_array.mjs"),c=n.interopDefault(u),l=e("regenerator-runtime"),f=n.interopDefault(l);function h(e,t){return v(e)||function(e,t){var r=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return r}(e,t)||p()}function d(e){return v(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(e){if(Array.isArray(e))return e}function m(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){m(i,n,s,a,o,"next",e)}function o(e){m(i,n,s,a,o,"throw",e)}a(void 0)}))}}var _,g,b,k,w,j,x,E,D,A=[].splice;D=e("./parser"),w=e("./Queues"),b=e("./Job"),k=e("./LocalDatastore"),j=e("./RedisDatastore"),g=e("./Events"),x=e("./States"),E=e("./Sync"),_=function(){var t=function(){function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var a,o,u=this;(0,i.default)(this,e),this._addToQueue=this._addToQueue.bind(this),this._validateOptions(t,n),D.load(t,this.instanceDefaults,this),this._queues=new w(10),this._scheduled={},this._states=new x(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new g(this),this._submitLock=new E("submit",this.Promise),this._registerLock=new E("register",this.Promise),o=D.load(t,this.storeDefaults,{}),this._store=function(){if("redis"===this.datastore||"ioredis"===this.datastore||null!=this.connection)return a=D.load(t,this.redisStoreDefaults,{}),new j(this,o,a);if("local"===this.datastore)return a=D.load(t,this.localStoreDefaults,{}),new k(this,o,a);throw new e.prototype.BottleneckError("Invalid datastore type: ".concat(this.datastore))}.call(this),this._queues.on("leftzero",(function(){var e;return null!=(e=u._store.heartbeat)&&"function"==typeof e.ref?e.ref():void 0})),this._queues.on("zero",(function(){var e;return null!=(e=u._store.heartbeat)&&"function"==typeof e.unref?e.unref():void 0}))}return(0,o.default)(e,[{key:"_validateOptions",value:function(t,r){if(null==t||"object"!=typeof t||0!==r.length)throw new e.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}},{key:"ready",value:function(){return this._store.ready}},{key:"clients",value:function(){return this._store.clients}},{key:"channel",value:function(){return"b_".concat(this.id)}},{key:"channel_client",value:function(){return"b_".concat(this.id,"_").concat(this._store.clientId)}},{key:"publish",value:function(e){return this._store.__publish__(e)}},{key:"disconnect",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._store.__disconnect__(e)}},{key:"chain",value:function(e){return this._limiter=e,this}},{key:"queued",value:function(e){return this._queues.queued(e)}},{key:"clusterQueued",value:function(){return this._store.__queued__()}},{key:"empty",value:function(){return 0===this.queued()&&this._submitLock.isEmpty()}},{key:"running",value:function(){return this._store.__running__()}},{key:"done",value:function(){return this._store.__done__()}},{key:"jobStatus",value:function(e){return this._states.jobStatus(e)}},{key:"jobs",value:function(e){return this._states.statusJobs(e)}},{key:"counts",value:function(){return this._states.statusCounts()}},{key:"_randomIndex",value:function(){return Math.random().toString(36).slice(2)}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._store.__check__(e)}},{key:"_clearGlobalState",value:function(e){return null!=this._scheduled[e]&&(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}},{key:"_free",value:function(e,t,r,n){var s=this;return y(f.default.mark((function t(){var i,a,o;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,s._store.__free__(e,r.weight);case 4:if(o=t.sent,a=o.running,s.Events.trigger("debug","Freed ".concat(r.id),n),0!==a||!s.empty()){t.next=9;break}return t.abrupt("return",s.Events.trigger("idle"));case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t.catch(1),i=t.t0,t.abrupt("return",s.Events.trigger("error",i));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},{key:"_run",value:function(e,t,r){var n,s,i,a=this;return t.doRun(),n=this._clearGlobalState.bind(this,e),i=this._run.bind(this,e,t),s=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout((function(){return t.doExecute(a._limiter,n,i,s)}),r),expiration:null!=t.options.expiration?setTimeout((function(){return t.doExpire(n,i,s)}),r+t.options.expiration):void 0,job:t}}},{key:"_drainOne",value:function(e){var t=this;return this._registerLock.schedule((function(){var r,n,s,i,a;if(0===t.queued())return t.Promise.resolve(null);a=t._queues.getFirst();var o=s=a.first();return i=o.options,r=o.args,null!=e&&i.weight>e?t.Promise.resolve(null):(t.Events.trigger("debug","Draining ".concat(i.id),{args:r,options:i}),n=t._randomIndex(),t._store.__register__(n,i.weight,i.expiration).then((function(e){var o,u=e.success,c=e.wait,l=e.reservoir;return t.Events.trigger("debug","Drained ".concat(i.id),{success:u,args:r,options:i}),u?(a.shift(),(o=t.empty())&&t.Events.trigger("empty"),0===l&&t.Events.trigger("depleted",o),t._run(n,s,c),t.Promise.resolve(i.weight)):t.Promise.resolve(null)})))}))}},{key:"_drainAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this;return this._drainOne(e).then((function(n){var s;return null!=n?(s=null!=e?e-n:e,r._drainAll(s,t+n)):r.Promise.resolve(t)})).catch((function(e){return r.Events.trigger("error",e)}))}},{key:"_dropAllQueued",value:function(e){return this._queues.shiftAll((function(t){return t.doDrop({message:e})}))}},{key:"stop",value:function(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this;return n=D.load(n,this.stopDefaults),r=function(e){var t;return t=function(){var t;return(t=s._states.counts)[0]+t[1]+t[2]+t[3]===e},new s.Promise((function(e,r){return t()?e():s.on("done",(function(){if(t())return s.removeAllListeners("done"),e()}))}))},t=n.dropWaitingJobs?(this._run=function(e,t){return t.doDrop({message:n.dropErrorMessage})},this._drainOne=function(){return s.Promise.resolve(null)},this._registerLock.schedule((function(){return s._submitLock.schedule((function(){var e,t,i;for(e in t=s._scheduled)i=t[e],"RUNNING"===s.jobStatus(i.job.options.id)&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:n.dropErrorMessage}));return s._dropAllQueued(n.dropErrorMessage),r(0)}))}))):this.schedule({priority:9,weight:0},(function(){return r(1)})),this._receive=function(t){return t._reject(new e.prototype.BottleneckError(n.enqueueErrorMessage))},this.stop=function(){return s.Promise.reject(new e.prototype.BottleneckError("stop() has already been called"))},t}},{key:"_addToQueue",value:function(t){var r=this;return y(f.default.mark((function n(){var s,i,a,o,u,c,l,h;return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.args,o=t.options,n.prev=3,n.next=6,r._store.__submit__(r.queued(),o.weight);case 6:h=n.sent,u=h.reachedHWM,i=h.blocked,l=h.strategy,n.next=18;break;case 12:return n.prev=12,n.t0=n.catch(3),a=n.t0,r.Events.trigger("debug","Could not queue ".concat(o.id),{args:s,options:o,error:a}),t.doDrop({error:a}),n.abrupt("return",!1);case 18:if(!i){n.next=23;break}return t.doDrop(),n.abrupt("return",!0);case 23:if(!u){n.next=29;break}if(null!=(c=l===e.prototype.strategy.LEAK?r._queues.shiftLastFrom(o.priority):l===e.prototype.strategy.OVERFLOW_PRIORITY?r._queues.shiftLastFrom(o.priority+1):l===e.prototype.strategy.OVERFLOW?t:void 0)&&c.doDrop(),null!=c&&l!==e.prototype.strategy.OVERFLOW){n.next=29;break}return null==c&&t.doDrop(),n.abrupt("return",u);case 29:return t.doQueue(u,i),r._queues.push(t),n.next=33,r._drainAll();case 33:return n.abrupt("return",u);case 34:case"end":return n.stop()}}),n,null,[[3,12]])})))()}},{key:"_receive",value:function(t){return null!=this._states.jobStatus(t.options.id)?(t._reject(new e.prototype.BottleneckError("A job with the same id already exists (id=".concat(t.options.id,")"))),!1):(t.doReceive(),this._submitLock.schedule(this._addToQueue,t))}},{key:"submit",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,i,a,o,u,l,f,p,v=this;"function"==typeof t[0]?(u=d(t),s=u[0],t=u.slice(1),l=h(A.call(t,-1),1),n=l[0],a=D.load({},this.jobDefaults)):(a=(f=d(t))[0],s=f[1],t=f.slice(2),p=h(A.call(t,-1),1),n=p[0],a=D.load(a,this.jobDefaults));return o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new v.Promise((function(e,r){return s.apply(void 0,(0,c.default)(t).concat([function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(null!=n[0]?r:e)(n)}]))}))},(i=new b(o,t,a,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise)).promise.then((function(e){return"function"==typeof n?n.apply(void 0,(0,c.default)(e)):void 0})).catch((function(e){return Array.isArray(e)?"function"==typeof n?n.apply(void 0,(0,c.default)(e)):void 0:"function"==typeof n?n(e):void 0})),this._receive(i)}},{key:"schedule",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,i;if("function"==typeof t[0]){var a=t,o=d(a);i=o[0],t=o.slice(1),s={}}else{var u=t,c=d(u);s=c[0],i=c[1],t=c.slice(2)}return n=new b(i,t,s,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(n),n.promise}},{key:"wrap",value:function(e){var t,r;return t=this.schedule.bind(this),r=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.apply(void 0,[e.bind(this)].concat((0,c.default)(n)))},r.withOptions=function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return t.apply(void 0,[r,e].concat((0,c.default)(s)))},r}},{key:"updateSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return y(f.default.mark((function r(){return f.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._store.__updateSettings__(D.overwrite(e,t.storeDefaults));case 2:return D.overwrite(e,t.instanceDefaults,t),r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})))()}},{key:"currentReservoir",value:function(){return this._store.__currentReservoir__()}},{key:"incrementReservoir",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._store.__incrementReservoir__(e)}}]),e}();return t.default=t,t.Events=g,t.version=t.prototype.version=e("./version.json").version,t.strategy=t.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},t.BottleneckError=t.prototype.BottleneckError=e("./BottleneckError"),t.Group=t.prototype.Group=e("./Group"),t.RedisConnection=t.prototype.RedisConnection=e("./RedisConnection"),t.IORedisConnection=t.prototype.IORedisConnection=e("./IORedisConnection"),t.Batcher=t.prototype.Batcher=e("./Batcher"),t.prototype.jobDefaults={priority:5,weight:1,expiration:null,id:"<no-id>"},t.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:t.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},t.prototype.localStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:250},t.prototype.redisStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},t.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise:Promise},t.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},t}.call(void 0),t.exports=_},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","./parser":"2BgUG","./Queues":"1jcNX","./Job":"3cL4h","./LocalDatastore":"5eOhb","./RedisDatastore":"fLsTT","./Events":"atGPC","./States":"vqi7z","./Sync":"jNoa1","./version.json":"2ioVv","./BottleneckError":"bTksA","./Group":"atrI1","./RedisConnection":"btByZ","./IORedisConnection":"7LRob","./Batcher":"6ptSl","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"2BgUG":[function(e,t,r){"use strict";r.load=function(e,t){var r,n,s,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(r in t)s=t[r],i[r]=null!=(n=e[r])?n:s;return i},r.overwrite=function(e,t){var r,n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(r in e)n=e[r],void 0!==t[r]&&(s[r]=n);return s}},{}],"1jcNX":[function(e,t,r){var n,s,i,a=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("@swc/helpers/src/_class_call_check.mjs"),u=a.interopDefault(o),c=e("@swc/helpers/src/_create_class.mjs"),l=a.interopDefault(c);n=e("./DLList"),s=e("./Events"),i=function(){function e(t){(0,u.default)(this,e),this.Events=new s(this),this._length=0,this._lists=function(){var e,r,s,i=this;for(s=[],e=1,r=t;1<=r?e<=r:e>=r;1<=r?++e:--e)s.push(new n((function(){return i.incr()}),(function(){return i.decr()})));return s}.call(this)}return(0,l.default)(e,[{key:"incr",value:function(){if(0==this._length++)return this.Events.trigger("leftzero")}},{key:"decr",value:function(){if(0==--this._length)return this.Events.trigger("zero")}},{key:"push",value:function(e){return this._lists[e.options.priority].push(e)}},{key:"queued",value:function(e){return null!=e?this._lists[e].length:this._length}},{key:"shiftAll",value:function(e){return this._lists.forEach((function(t){return t.forEachShift(e)}))}},{key:"getFirst",value:function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._lists;for(e=0,t=n.length;e<t;e++)if((r=n[e]).length>0)return r;return[]}},{key:"shiftLastFrom",value:function(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}}]),e}(),t.exports=i},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","./DLList":"inXX9","./Events":"atGPC","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],inXX9:[function(e,t,r){var n,s=e("@parcel/transformer-js/src/esmodule-helpers.js"),i=e("@swc/helpers/src/_class_call_check.mjs"),a=s.interopDefault(i),o=e("@swc/helpers/src/_create_class.mjs"),u=s.interopDefault(o);n=function(){function e(t,r){(0,a.default)(this,e),this.incr=t,this.decr=r,this._first=null,this._last=null,this.length=0}return(0,u.default)(e,[{key:"push",value:function(e){var t;this.length++,"function"==typeof this.incr&&this.incr(),t={value:e,prev:this._last,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t}},{key:"shift",value:function(){var e;if(null!=this._first)return this.length--,"function"==typeof this.decr&&this.decr(),e=this._first.value,null!=(this._first=this._first.next)?this._first.prev=null:this._last=null,e}},{key:"first",value:function(){if(null!=this._first)return this._first.value}},{key:"getArray",value:function(){var e,t,r;for(e=this._first,r=[];null!=e;)r.push((t=e,e=e.next,t.value));return r}},{key:"forEachShift",value:function(e){var t;for(t=this.shift();null!=t;)e(t),t=this.shift()}},{key:"debug",value:function(){var e,t,r,n,s;for(e=this._first,s=[];null!=e;)s.push((t=e,e=e.next,{value:t.value,prev:null!=(r=t.prev)?r.value:void 0,next:null!=(n=t.next)?n.value:void 0}));return s}}]),e}(),t.exports=n},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],atGPC:[function(e,t,r){var n,s=e("@parcel/transformer-js/src/esmodule-helpers.js"),i=e("@swc/helpers/src/_class_call_check.mjs"),a=s.interopDefault(i),o=e("@swc/helpers/src/_create_class.mjs"),u=s.interopDefault(o),c=e("@swc/helpers/src/_to_consumable_array.mjs"),l=s.interopDefault(c),f=e("regenerator-runtime"),h=s.interopDefault(f);function d(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){d(i,n,s,a,o,"next",e)}function o(e){d(i,n,s,a,o,"throw",e)}a(void 0)}))}}n=function(){function e(t){var r=this;if((0,a.default)(this,e),this.instance=t,this._events={},null!=this.instance.on||null!=this.instance.once||null!=this.instance.removeAllListeners)throw new Error("An Emitter already exists for this object");this.instance.on=function(e,t){return r._addListener(e,"many",t)},this.instance.once=function(e,t){return r._addListener(e,"once",t)},this.instance.removeAllListeners=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e?delete r._events[e]:r._events={}}}return(0,u.default)(e,[{key:"_addListener",value:function(e,t,r){var n;return null==(n=this._events)[e]&&(n[e]=[]),this._events[e].push({cb:r,status:t}),this.instance}},{key:"listenerCount",value:function(e){return null!=this._events[e]?this._events[e].length:0}},{key:"trigger",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s=this;return p(h.default.mark((function t(){var n,i;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,"debug"!==e&&s.trigger("debug","Event triggered: ".concat(e),r),null!=s._events[e]){t.next=5;break}return t.abrupt("return");case 5:return s._events[e]=s._events[e].filter((function(e){return"none"!==e.status})),i=s._events[e].map(function(){var e=p(h.default.mark((function e(t){var n,i,a;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==t.status){e.next=3;break}return e.abrupt("return");case 3:if("once"===t.status&&(t.status="none"),e.prev=4,"function"!=typeof(null!=(i="function"==typeof t.cb?(a=t).cb.apply(a,(0,l.default)(r)):void 0)?i.then:void 0)){e.next=13;break}return e.next=10,i;case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",i);case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(4),n=e.t0,s.trigger("error",n),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),t.next=9,Promise.all(i);case 9:return t.abrupt("return",t.sent.find((function(e){return null!=e})));case 12:return t.prev=12,t.t0=t.catch(1),n=t.t0,s.trigger("error",n),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}]),e}(),t.exports=n},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"3cL4h":[function(e,t,r){var n,s,i,a=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("@swc/helpers/src/_class_call_check.mjs"),u=a.interopDefault(o),c=e("@swc/helpers/src/_create_class.mjs"),l=a.interopDefault(c),f=e("@swc/helpers/src/_to_consumable_array.mjs"),h=a.interopDefault(f),d=e("regenerator-runtime"),p=a.interopDefault(d);function v(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){v(i,n,s,a,o,"next",e)}function o(e){v(i,n,s,a,o,"throw",e)}a(void 0)}))}}i=e("./parser"),n=e("./BottleneckError"),s=function(){function e(t,r,n,s,a,o,c,l){var f=this;(0,u.default)(this,e),this.task=t,this.args=r,this.rejectOnDrop=a,this.Events=o,this._states=c,this.Promise=l,this.options=i.load(n,s),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===s.id&&(this.options.id="".concat(this.options.id,"-").concat(this._randomIndex())),this.promise=new this.Promise((function(e,t){f._resolve=e,f._reject=t})),this.retryCount=0}return(0,l.default)(e,[{key:"_sanitizePriority",value:function(e){var t;return(t=~~e!==e?5:e)<0?0:t>9?9:t}},{key:"_randomIndex",value:function(){return Math.random().toString(36).slice(2)}},{key:"doDrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.message,s=void 0===r?"This job has been dropped by Bottleneck":r;return!!this._states.remove(this.options.id)&&(this.rejectOnDrop&&this._reject(null!=t?t:new n(s)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0)}},{key:"_assertStatus",value:function(e){var t;if((t=this._states.jobStatus(this.options.id))!==e&&("DONE"!==e||null!==t))throw new n("Invalid job status ".concat(t,", expected ").concat(e,". Please open an issue at https://github.com/SGrondin/bottleneck/issues"))}},{key:"doReceive",value:function(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}},{key:"doQueue",value:function(e,t){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:e,blocked:t})}},{key:"doRun",value:function(){return 0===this.retryCount?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}},{key:"doExecute",value:function(e,t,r,n){var s=this;return m(p.default.mark((function i(){var a,o,u,c,l;return p.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return 0===s.retryCount?(s._assertStatus("RUNNING"),s._states.next(s.options.id)):s._assertStatus("EXECUTING"),o={args:s.args,options:s.options,retryCount:s.retryCount},s.Events.trigger("executing",o),i.prev=4,i.next=8,null!=e?(c=e).schedule.apply(c,[s.options,s.task].concat((0,h.default)(s.args))):(l=s).task.apply(l,(0,h.default)(s.args));case 8:if(u=i.sent,!t()){i.next=15;break}return s.doDone(o),i.next=13,n(s.options,o);case 13:return s._assertStatus("DONE"),i.abrupt("return",s._resolve(u));case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(4),a=i.t0,i.abrupt("return",s._onFailure(a,o,t,r,n));case 21:case"end":return i.stop()}}),i,null,[[4,17]])})))()}},{key:"doExpire",value:function(e,t,r){var s,i;return this._states.jobStatus("RUNNING"===this.options.id)&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),i={args:this.args,options:this.options,retryCount:this.retryCount},s=new n("This job timed out after ".concat(this.options.expiration," ms.")),this._onFailure(s,i,e,t,r)}},{key:"_onFailure",value:function(e,t,r,n,s){var i=this;return m(p.default.mark((function a(){var o,u;return p.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r()){a.next=17;break}return a.next=4,i.Events.trigger("failed",e,t);case 4:if(null==(o=a.sent)){a.next=12;break}return u=~~o,i.Events.trigger("retry","Retrying ".concat(i.options.id," after ").concat(u," ms"),t),i.retryCount++,a.abrupt("return",n(u));case 12:return i.doDone(t),a.next=15,s(i.options,t);case 15:return i._assertStatus("DONE"),a.abrupt("return",i._reject(e));case 17:case"end":return a.stop()}}),a)})))()}},{key:"doDone",value:function(e){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",e)}}]),e}(),t.exports=s},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","./parser":"2BgUG","./BottleneckError":"bTksA","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],bTksA:[function(e,t,r){var n,s=e("@parcel/transformer-js/src/esmodule-helpers.js"),i=e("@swc/helpers/src/_class_call_check.mjs"),a=s.interopDefault(i),o=e("@swc/helpers/src/_inherits.mjs"),u=s.interopDefault(o),c=e("@swc/helpers/src/_wrap_native_super.mjs"),l=s.interopDefault(c),f=e("@swc/helpers/src/_create_super.mjs"),h=s.interopDefault(f);n=function(e){(0,u.default)(r,e);var t=(0,h.default)(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return r}((0,l.default)(Error)),t.exports=n},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_wrap_native_super.mjs":"jgQkv","@swc/helpers/src/_create_super.mjs":"dJHhu","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],jgQkv:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_construct.mjs"),i=n.interopDefault(s),a=e("./_is_native_function.mjs"),o=n.interopDefault(a),u=e("./_get_prototype_of.mjs"),c=n.interopDefault(u),l=e("./_set_prototype_of.mjs"),f=n.interopDefault(l);function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||!(0,o.default)(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,i.default)(e,arguments,(0,c.default)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,f.default)(r,e)},h(e)}r.default=function(e){return h(e)}},{"./_construct.mjs":"b0YbA","./_is_native_function.mjs":"b0Z0d","./_get_prototype_of.mjs":"1gzL0","./_set_prototype_of.mjs":"dS33n","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],b0YbA:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_set_prototype_of.mjs"),i=n.interopDefault(s);function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,r){return o=a()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var s=new(Function.bind.apply(e,n));return r&&(0,i.default)(s,r.prototype),s},o.apply(null,arguments)}r.default=function(e,t,r){return o.apply(null,arguments)}},{"./_set_prototype_of.mjs":"dS33n","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],b0Z0d:[function(e,t,r){e("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(r),r.default=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{"@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"5eOhb":[function(e,t,r){var n,s,i,a=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("@swc/helpers/src/_class_call_check.mjs"),u=a.interopDefault(o),c=e("@swc/helpers/src/_create_class.mjs"),l=a.interopDefault(c),f=e("regenerator-runtime"),h=a.interopDefault(f);function d(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){d(i,n,s,a,o,"next",e)}function o(e){d(i,n,s,a,o,"throw",e)}a(void 0)}))}}i=e("./parser"),n=e("./BottleneckError"),s=function(){function e(t,r,n){(0,u.default)(this,e),this.instance=t,this.storeOptions=r,this.clientId=this.instance._randomIndex(),i.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}return(0,l.default)(e,[{key:"_startHeartbeat",value:function(){var e,t=this;return null==this.heartbeat&&(null!=this.storeOptions.reservoirRefreshInterval&&null!=this.storeOptions.reservoirRefreshAmount||null!=this.storeOptions.reservoirIncreaseInterval&&null!=this.storeOptions.reservoirIncreaseAmount)?"function"==typeof(e=this.heartbeat=setInterval((function(){var e,r,n,s,i;if(s=Date.now(),null!=t.storeOptions.reservoirRefreshInterval&&s>=t._lastReservoirRefresh+t.storeOptions.reservoirRefreshInterval&&(t._lastReservoirRefresh=s,t.storeOptions.reservoir=t.storeOptions.reservoirRefreshAmount,t.instance._drainAll(t.computeCapacity())),null!=t.storeOptions.reservoirIncreaseInterval&&s>=t._lastReservoirIncrease+t.storeOptions.reservoirIncreaseInterval){var a=t.storeOptions;if(e=a.reservoirIncreaseAmount,n=a.reservoirIncreaseMaximum,i=a.reservoir,t._lastReservoirIncrease=s,(r=null!=n?Math.min(e,n-i):e)>0)return t.storeOptions.reservoir+=r,t.instance._drainAll(t.computeCapacity())}}),this.heartbeatInterval)).unref?e.unref():void 0:clearInterval(this.heartbeat)}},{key:"__publish__",value:function(e){var t=this;return p(h.default.mark((function r(){return h.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.yieldLoop();case 2:return r.abrupt("return",t.instance.Events.trigger("message",e.toString()));case 3:case"end":return r.stop()}}),r)})))()}},{key:"__disconnect__",value:function(e){var t=this;return p(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.yieldLoop();case 2:return clearInterval(t.heartbeat),e.abrupt("return",t.Promise.resolve());case 4:case"end":return e.stop()}}),e)})))()}},{key:"yieldLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new this.Promise((function(t,r){return setTimeout(t,e)}))}},{key:"computePenalty",value:function(){var e;return null!=(e=this.storeOptions.penalty)?e:15*this.storeOptions.minTime||5e3}},{key:"__updateSettings__",value:function(e){var t=this;return p(h.default.mark((function r(){return h.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.yieldLoop();case 2:return i.overwrite(e,e,t.storeOptions),t._startHeartbeat(),t.instance._drainAll(t.computeCapacity()),r.abrupt("return",!0);case 6:case"end":return r.stop()}}),r)})))()}},{key:"__running__",value:function(){var e=this;return p(h.default.mark((function t(){return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.yieldLoop();case 2:return t.abrupt("return",e._running);case 3:case"end":return t.stop()}}),t)})))()}},{key:"__queued__",value:function(){var e=this;return p(h.default.mark((function t(){return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.yieldLoop();case 2:return t.abrupt("return",e.instance.queued());case 3:case"end":return t.stop()}}),t)})))()}},{key:"__done__",value:function(){var e=this;return p(h.default.mark((function t(){return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.yieldLoop();case 2:return t.abrupt("return",e._done);case 3:case"end":return t.stop()}}),t)})))()}},{key:"__groupCheck__",value:function(e){var t=this;return p(h.default.mark((function r(){return h.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.yieldLoop();case 2:return r.abrupt("return",t._nextRequest+t.timeout<e);case 3:case"end":return r.stop()}}),r)})))()}},{key:"computeCapacity",value:function(){var e,t,r=this.storeOptions;return e=r.maxConcurrent,t=r.reservoir,null!=e&&null!=t?Math.min(e-this._running,t):null!=e?e-this._running:null!=t?t:null}},{key:"conditionsCheck",value:function(e){var t;return null==(t=this.computeCapacity())||e<=t}},{key:"__incrementReservoir__",value:function(e){var t=this;return p(h.default.mark((function r(){var n;return h.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,t.yieldLoop();case 3:return n=t.storeOptions.reservoir+=e,t.instance._drainAll(t.computeCapacity()),r.abrupt("return",n);case 6:case"end":return r.stop()}}),r)})))()}},{key:"__currentReservoir__",value:function(){var e=this;return p(h.default.mark((function t(){return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.yieldLoop();case 2:return t.abrupt("return",e.storeOptions.reservoir);case 3:case"end":return t.stop()}}),t)})))()}},{key:"isBlocked",value:function(e){return this._unblockTime>=e}},{key:"check",value:function(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}},{key:"__check__",value:function(e){var t=this;return p(h.default.mark((function r(){var n;return h.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,t.yieldLoop();case 3:return n=Date.now(),r.abrupt("return",t.check(e,n));case 5:case"end":return r.stop()}}),r)})))()}},{key:"__register__",value:function(e,t,r){var n=this;return p(h.default.mark((function e(){var r,s;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n.yieldLoop();case 3:if(r=Date.now(),!n.conditionsCheck(t)){e.next=12;break}return n._running+=t,null!=n.storeOptions.reservoir&&(n.storeOptions.reservoir-=t),s=Math.max(n._nextRequest-r,0),n._nextRequest=r+s+n.storeOptions.minTime,e.abrupt("return",{success:!0,wait:s,reservoir:n.storeOptions.reservoir});case 12:return e.abrupt("return",{success:!1});case 13:case"end":return e.stop()}}),e)})))()}},{key:"strategyIsBlock",value:function(){return 3===this.storeOptions.strategy}},{key:"__submit__",value:function(e,t){var r=this;return p(h.default.mark((function s(){var i,a,o;return h.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,r.yieldLoop();case 3:if(!(null!=r.storeOptions.maxConcurrent&&t>r.storeOptions.maxConcurrent)){s.next=5;break}throw new n("Impossible to add a job having a weight of ".concat(t," to a limiter having a maxConcurrent setting of ").concat(r.storeOptions.maxConcurrent));case 5:return a=Date.now(),o=null!=r.storeOptions.highWater&&e===r.storeOptions.highWater&&!r.check(t,a),(i=r.strategyIsBlock()&&(o||r.isBlocked(a)))&&(r._unblockTime=a+r.computePenalty(),r._nextRequest=r._unblockTime+r.storeOptions.minTime,r.instance._dropAllQueued()),s.abrupt("return",{reachedHWM:o,blocked:i,strategy:r.storeOptions.strategy});case 10:case"end":return s.stop()}}),s)})))()}},{key:"__free__",value:function(e,t){var r=this;return p(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.yieldLoop();case 2:return r._running-=t,r._done+=t,r.instance._drainAll(r.computeCapacity()),e.abrupt("return",{running:r._running});case 6:case"end":return e.stop()}}),e)})))()}}]),e}(),t.exports=s},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","regenerator-runtime":"achxx","./parser":"2BgUG","./BottleneckError":"bTksA","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],fLsTT:[function(e,t,r){var n,s,i,a,o,u=e("@parcel/transformer-js/src/esmodule-helpers.js"),c=e("@swc/helpers/src/_class_call_check.mjs"),l=u.interopDefault(c),f=e("@swc/helpers/src/_create_class.mjs"),h=u.interopDefault(f),d=e("@swc/helpers/src/_to_consumable_array.mjs"),p=u.interopDefault(d),v=e("regenerator-runtime"),m=u.interopDefault(v);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){_(i,n,s,a,o,"next",e)}function o(e){_(i,n,s,a,o,"throw",e)}a(void 0)}))}}o=e("./parser"),n=e("./BottleneckError"),i=e("./RedisConnection"),s=e("./IORedisConnection"),a=function(){function e(t,r,n){var a=this;(0,l.default)(this,e),this.instance=t,this.storeOptions=r,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),o.load(n,n,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=null!=this.connection,null==this.connection&&(this.connection="redis"===this.instance.datastore?new i({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):"ioredis"===this.instance.datastore?new s({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then((function(e){return a.clients=e,a.runScript("init",a.prepareInitSettings(a.clearDatastore))})).then((function(){return a.connection.__addLimiter__(a.instance)})).then((function(){return a.runScript("register_client",[a.instance.queued()])})).then((function(){var e;return"function"==typeof(e=a.heartbeat=setInterval((function(){return a.runScript("heartbeat",[]).catch((function(e){return a.instance.Events.trigger("error",e)}))}),a.heartbeatInterval)).unref&&e.unref(),a.clients}))}return(0,h.default)(e,[{key:"__publish__",value:function(e){var t=this;return g(m.default.mark((function r(){var n,s;return m.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,t.ready;case 3:return s=r.sent,n=s.client,r.abrupt("return",n.publish(t.instance.channel(),"message:".concat(e.toString())));case 6:case"end":return r.stop()}}),r)})))()}},{key:"onMessage",value:function(e,t){var r=this;return g(m.default.mark((function e(){var n,s,i,a,o,u,c,l,f,h,d,p,v;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,c=t.indexOf(":"),d=[t.slice(0,c),t.slice(c+1)],i=d[1],"capacity"!==(h=d[0])){e.next=12;break}return e.next=9,r.instance._drainAll(i.length>0?~~i:void 0);case 9:case 26:case 45:return e.abrupt("return",e.sent);case 12:if("capacity-priority"!==h){e.next=38;break}if(p=i.split(":"),v=y(p,3),f=v[0],l=v[1],s=v[2],n=f.length>0?~~f:void 0,l!==r.clientId){e.next=29;break}return e.next=22,r.instance._drainAll(n);case 22:return a=e.sent,u=null!=n?n-(a||0):"",e.next=26,r.clients.client.publish(r.instance.channel(),"capacity-priority:".concat(u,"::").concat(s));case 29:if(""!==l){e.next=35;break}return clearTimeout(r.capacityPriorityCounters[s]),delete r.capacityPriorityCounters[s],e.abrupt("return",r.instance._drainAll(n));case 35:return e.abrupt("return",r.capacityPriorityCounters[s]=setTimeout(g(m.default.mark((function e(){var t;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,delete r.capacityPriorityCounters[s],e.next=5,r.runScript("blacklist_client",[l]);case 5:return e.next=7,r.instance._drainAll(n);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),t=e.t0,e.abrupt("return",r.instance.Events.trigger("error",t));case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),1e3));case 36:e.next=46;break;case 38:if("message"!==h){e.next=42;break}return e.abrupt("return",r.instance.Events.trigger("message",i));case 42:if("blocked"!==h){e.next=46;break}return e.next=45,r.instance._dropAllQueued();case 46:e.next=52;break;case 48:return e.prev=48,e.t0=e.catch(1),o=e.t0,e.abrupt("return",r.instance.Events.trigger("error",o));case 52:case"end":return e.stop()}}),e,null,[[1,48]])})))()}},{key:"__disconnect__",value:function(e){return clearInterval(this.heartbeat),this.sharedConnection?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(e)}},{key:"runScript",value:function(e,t){var r=this;return g(m.default.mark((function n(){var s;return m.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=this,"init"===e||"register_client"===e){n.next=4;break}return n.next=4,r.ready;case 4:return n.abrupt("return",new r.Promise((function(n,i){var a,o;return a=[Date.now(),r.clientId].concat(t),r.instance.Events.trigger("debug","Calling Redis script: ".concat(e,".lua"),a),o=r.connection.__scriptArgs__(e,r.originalId,a,(function(e,t){return null!=e?i(e):n(t)})),r.connection.__scriptFn__(e).apply(s,(0,p.default)(o))})).catch((function(n){return"SETTINGS_KEY_NOT_FOUND"===n.message?"heartbeat"===e?r.Promise.resolve():r.runScript("init",r.prepareInitSettings(!1)).then((function(){return r.runScript(e,t)})):"UNKNOWN_CLIENT"===n.message?r.runScript("register_client",[r.instance.queued()]).then((function(){return r.runScript(e,t)})):r.Promise.reject(n)})));case 5:case"end":return n.stop()}}),n,this)})))()}},{key:"prepareArray",value:function(e){var t,r,n,s;for(n=[],t=0,r=e.length;t<r;t++)s=e[t],n.push(null!=s?s.toString():"");return n}},{key:"prepareObject",value:function(e){var t,r,n;for(r in t=[],e)n=e[r],t.push(r,null!=n?n.toString():"");return t}},{key:"prepareInitSettings",value:function(e){var t;return(t=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout}))).unshift(e?1:0,this.instance.version),t}},{key:"convertBool",value:function(e){return!!e}},{key:"__updateSettings__",value:function(e){var t=this;return g(m.default.mark((function r(){return m.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.runScript("update_settings",t.prepareObject(e));case 2:return r.abrupt("return",o.overwrite(e,e,t.storeOptions));case 3:case"end":return r.stop()}}),r)})))()}},{key:"__running__",value:function(){return this.runScript("running",[])}},{key:"__queued__",value:function(){return this.runScript("queued",[])}},{key:"__done__",value:function(){return this.runScript("done",[])}},{key:"__groupCheck__",value:function(){var e=this;return g(m.default.mark((function t(){return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.runScript("group_check",[]);case 3:return t.t1=t.sent,t.abrupt("return",t.t0.convertBool.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})))()}},{key:"__incrementReservoir__",value:function(e){return this.runScript("increment_reservoir",[e])}},{key:"__currentReservoir__",value:function(){return this.runScript("current_reservoir",[])}},{key:"__check__",value:function(e){var t=this;return g(m.default.mark((function r(){return m.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.next=3,t.runScript("check",t.prepareArray([e]));case 3:return r.t1=r.sent,r.abrupt("return",r.t0.convertBool.call(r.t0,r.t1));case 5:case"end":return r.stop()}}),r)})))()}},{key:"__register__",value:function(e,t,r){var n=this;return g(m.default.mark((function s(){var i,a,o,u,c;return m.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,n.runScript("register",n.prepareArray([e,t,r]));case 3:return u=s.sent,c=y(u,3),a=c[0],o=c[1],i=c[2],s.abrupt("return",{success:n.convertBool(a),wait:o,reservoir:i});case 9:case"end":return s.stop()}}),s)})))()}},{key:"__submit__",value:function(e,t){var r=this;return g(m.default.mark((function s(){var i,a,o,u,c,l,f,h,d;return m.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=1,s.next=4,r.runScript("submit",r.prepareArray([e,t]));case 4:return l=s.sent,f=y(l,3),u=f[0],i=f[1],c=f[2],s.abrupt("return",{reachedHWM:r.convertBool(u),blocked:r.convertBool(i),strategy:c});case 12:if(s.prev=12,s.t0=s.catch(1),0!==(a=s.t0).message.indexOf("OVERWEIGHT")){s.next=24;break}throw h=a.message.split(":"),d=y(h,3),d[0],t=d[1],o=d[2],new n("Impossible to add a job having a weight of ".concat(t," to a limiter having a maxConcurrent setting of ").concat(o));case 24:throw a;case 25:case"end":return s.stop()}}),s,null,[[1,12]])})))()}},{key:"__free__",value:function(e,t){var r=this;return g(m.default.mark((function t(){var n;return m.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,r.runScript("free",r.prepareArray([e]));case 3:return n=t.sent,t.abrupt("return",{running:n});case 5:case"end":return t.stop()}}),t)})))()}}]),e}(),t.exports=a},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","./parser":"2BgUG","./BottleneckError":"bTksA","./RedisConnection":"btByZ","./IORedisConnection":"7LRob","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],btByZ:[function(require,module,exports){var parcelHelpers=require("@parcel/transformer-js/src/esmodule-helpers.js"),_classCallCheckMjs=require("@swc/helpers/src/_class_call_check.mjs"),_classCallCheckMjsDefault=parcelHelpers.interopDefault(_classCallCheckMjs),_createClassMjs=require("@swc/helpers/src/_create_class.mjs"),_createClassMjsDefault=parcelHelpers.interopDefault(_createClassMjs),_regeneratorRuntime=require("regenerator-runtime"),_regeneratorRuntimeDefault=parcelHelpers.interopDefault(_regeneratorRuntime),Events,RedisConnection,Scripts,parser;function asyncGeneratorStep(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,s,a,o,"next",e)}function o(e){asyncGeneratorStep(i,n,s,a,o,"throw",e)}a(void 0)}))}}parser=require("./parser"),Events=require("./Events"),Scripts=require("./Scripts"),RedisConnection=function(){var RedisConnection=function(){function RedisConnection(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this=this;(0,_classCallCheckMjsDefault.default)(this,RedisConnection),parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("redis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null==this.client&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then((function(){return _this._loadScripts()})).then((function(){return{client:_this.client,subscriber:_this.subscriber}}))}return(0,_createClassMjsDefault.default)(RedisConnection,[{key:"_setup",value:function(e,t){var r=this;return e.setMaxListeners(0),new this.Promise((function(n,s){return e.on("error",(function(e){return r.Events.trigger("error",e)})),t&&e.on("message",(function(e,t){var n;return null!=(n=r.limiters[e])?n._store.onMessage(e,t):void 0})),e.ready?n():e.once("ready",n)}))}},{key:"_loadScript",value:function(e){var t=this;return new this.Promise((function(r,n){var s;return s=Scripts.payload(e),t.client.multi([["script","load",s]]).exec((function(s,i){return null!=s?n(s):(t.shas[e]=i[0],r(i[0]))}))}))}},{key:"_loadScripts",value:function(){var e=this;return this.Promise.all(Scripts.names.map((function(t){return e._loadScript(t)})))}},{key:"__runCommand__",value:function(e){var t=this;return _asyncToGenerator(_regeneratorRuntimeDefault.default.mark((function r(){return _regeneratorRuntimeDefault.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.ready;case 2:return r.abrupt("return",new t.Promise((function(r,n){return t.client.multi([e]).exec_atomic((function(e,t){return null!=e?n(e):r(t[0])}))})));case 3:case"end":return r.stop()}}),r)})))()}},{key:"__addLimiter__",value:function(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map((function(r){return new t.Promise((function(n,s){var i;return i=function(s){if(s===r)return t.subscriber.removeListener("subscribe",i),t.limiters[r]=e,n()},t.subscriber.on("subscribe",i),t.subscriber.subscribe(r)}))})))}},{key:"__removeLimiter__",value:function(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map(function(){var e=_asyncToGenerator(_regeneratorRuntimeDefault.default.mark((function e(r){return _regeneratorRuntimeDefault.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.terminated){e.next=3;break}return e.next=3,new t.Promise((function(e,n){return t.subscriber.unsubscribe(r,(function(t,s){return null!=t?n(t):s===r?e():void 0}))}));case 3:return e.abrupt("return",delete t.limiters[r]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},{key:"__scriptArgs__",value:function(e,t,r,n){var s;return s=Scripts.keys(e,t),[this.shas[e],s.length].concat(s,r,n)}},{key:"__scriptFn__",value:function(e){return this.client.evalsha.bind(this.client)}},{key:"disconnect",value:function(){var e,t,r,n,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(e=0,r=(n=Object.keys(this.limiters)).length;e<r;e++)t=n[e],clearInterval(this.limiters[t]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(s),this.subscriber.end(s),this.Promise.resolve()}}]),RedisConnection}();return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise:Promise,Events:null},RedisConnection}.call(void 0),module.exports=RedisConnection},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","regenerator-runtime":"achxx","./parser":"2BgUG","./Events":"atGPC","./Scripts":"9k6kW","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"9k6kW":[function(e,t,r){"use strict";var n,s,i;s=e("./lua.json"),n={refs:s["refs.lua"],validate_keys:s["validate_keys.lua"],validate_client:s["validate_client.lua"],refresh_expiration:s["refresh_expiration.lua"],process_tick:s["process_tick.lua"],conditions_check:s["conditions_check.lua"],get_time:s["get_time.lua"]},r.allKeys=function(e){return["b_".concat(e,"_settings"),"b_".concat(e,"_job_weights"),"b_".concat(e,"_job_expirations"),"b_".concat(e,"_job_clients"),"b_".concat(e,"_client_running"),"b_".concat(e,"_client_num_queued"),"b_".concat(e,"_client_last_registered"),"b_".concat(e,"_client_last_seen")]},i={init:{keys:r.allKeys,headers:["process_tick"],refresh_expiration:!0,code:s["init.lua"]},group_check:{keys:r.allKeys,headers:[],refresh_expiration:!1,code:s["group_check.lua"]},register_client:{keys:r.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:s["register_client.lua"]},blacklist_client:{keys:r.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:s["blacklist_client.lua"]},heartbeat:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:s["heartbeat.lua"]},update_settings:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:s["update_settings.lua"]},running:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:s["running.lua"]},queued:{keys:r.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:s["queued.lua"]},done:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:s["done.lua"]},check:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:s["check.lua"]},submit:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:s["submit.lua"]},register:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:s["register.lua"]},free:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:s["free.lua"]},current_reservoir:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:s["current_reservoir.lua"]},increment_reservoir:{keys:r.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:s["increment_reservoir.lua"]}},r.names=Object.keys(i),r.keys=function(e,t){return i[e].keys(t)},r.payload=function(e){var t;return t=i[e],Array.prototype.concat(n.refs,t.headers.map((function(e){return n[e]})),t.refresh_expiration?n.refresh_expiration:"",t.code).join("\n")}},{"./lua.json":"eklbP"}],eklbP:[function(e,t,r){t.exports=JSON.parse("{\"blacklist_client.lua\":\"local blacklist = ARGV[num_static_argv + 1]\\n\\nif redis.call('zscore', client_last_seen_key, blacklist) then\\n  redis.call('zadd', client_last_seen_key, 0, blacklist)\\nend\\n\\n\\nreturn {}\\n\",\"check.lua\":\"local weight = tonumber(ARGV[num_static_argv + 1])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\nlocal nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))\\n\\nreturn conditions_check(capacity, weight) and nextRequest - now <= 0\\n\",\"conditions_check.lua\":\"local conditions_check = function (capacity, weight)\\n  return capacity == nil or weight <= capacity\\nend\\n\",\"current_reservoir.lua\":\"return process_tick(now, false)['reservoir']\\n\",\"done.lua\":\"process_tick(now, false)\\n\\nreturn tonumber(redis.call('hget', settings_key, 'done'))\\n\",\"free.lua\":\"local index = ARGV[num_static_argv + 1]\\n\\nredis.call('zadd', job_expirations_key, 0, index)\\n\\nreturn process_tick(now, false)['running']\\n\",\"get_time.lua\":\"redis.replicate_commands()\\n\\nlocal get_time = function ()\\n  local time = redis.call('time')\\n\\n  return tonumber(time[1]..string.sub(time[2], 1, 3))\\nend\\n\",\"group_check.lua\":\"return not (redis.call('exists', settings_key) == 1)\\n\",\"heartbeat.lua\":\"process_tick(now, true)\\n\",\"increment_reservoir.lua\":\"local incr = tonumber(ARGV[num_static_argv + 1])\\n\\nredis.call('hincrby', settings_key, 'reservoir', incr)\\n\\nlocal reservoir = process_tick(now, true)['reservoir']\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn reservoir\\n\",\"init.lua\":\"local clear = tonumber(ARGV[num_static_argv + 1])\\nlocal limiter_version = ARGV[num_static_argv + 2]\\nlocal num_local_argv = num_static_argv + 2\\n\\nif clear == 1 then\\n  redis.call('del', unpack(KEYS))\\nend\\n\\nif redis.call('exists', settings_key) == 0 then\\n  -- Create\\n  local args = {'hmset', settings_key}\\n\\n  for i = num_local_argv + 1, #ARGV do\\n    table.insert(args, ARGV[i])\\n  end\\n\\n  redis.call(unpack(args))\\n  redis.call('hmset', settings_key,\\n    'nextRequest', now,\\n    'lastReservoirRefresh', now,\\n    'lastReservoirIncrease', now,\\n    'running', 0,\\n    'done', 0,\\n    'unblockTime', 0,\\n    'capacityPriorityCounter', 0\\n  )\\n\\nelse\\n  -- Apply migrations\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'version'\\n  )\\n  local id = settings[1]\\n  local current_version = settings[2]\\n\\n  if current_version ~= limiter_version then\\n    local version_digits = {}\\n    for k, v in string.gmatch(current_version, \\\"([^.]+)\\\") do\\n      table.insert(version_digits, tonumber(k))\\n    end\\n\\n    -- 2.10.0\\n    if version_digits[2] < 10 then\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')\\n      redis.call('hsetnx', settings_key, 'done', 0)\\n      redis.call('hset', settings_key, 'version', '2.10.0')\\n    end\\n\\n    -- 2.11.1\\n    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then\\n      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then\\n        redis.call('hmset', settings_key,\\n          'lastReservoirRefresh', now,\\n          'version', '2.11.1'\\n        )\\n      end\\n    end\\n\\n    -- 2.14.0\\n    if version_digits[2] < 14 then\\n      local old_running_key = 'b_'..id..'_running'\\n      local old_executing_key = 'b_'..id..'_executing'\\n\\n      if redis.call('exists', old_running_key) == 1 then\\n        redis.call('rename', old_running_key, job_weights_key)\\n      end\\n      if redis.call('exists', old_executing_key) == 1 then\\n        redis.call('rename', old_executing_key, job_expirations_key)\\n      end\\n      redis.call('hset', settings_key, 'version', '2.14.0')\\n    end\\n\\n    -- 2.15.2\\n    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then\\n      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)\\n      redis.call('hset', settings_key, 'version', '2.15.2')\\n    end\\n\\n    -- 2.17.0\\n    if version_digits[2] < 17 then\\n      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)\\n      redis.call('hset', settings_key, 'version', '2.17.0')\\n    end\\n\\n    -- 2.18.0\\n    if version_digits[2] < 18 then\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)\\n      redis.call('hset', settings_key, 'version', '2.18.0')\\n    end\\n\\n  end\\n\\n  process_tick(now, false)\\nend\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"process_tick.lua\":\"local process_tick = function (now, always_publish)\\n\\n  local compute_capacity = function (maxConcurrent, running, reservoir)\\n    if maxConcurrent ~= nil and reservoir ~= nil then\\n      return math.min((maxConcurrent - running), reservoir)\\n    elseif maxConcurrent ~= nil then\\n      return maxConcurrent - running\\n    elseif reservoir ~= nil then\\n      return reservoir\\n    else\\n      return nil\\n    end\\n  end\\n\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'maxConcurrent',\\n    'running',\\n    'reservoir',\\n    'reservoirRefreshInterval',\\n    'reservoirRefreshAmount',\\n    'lastReservoirRefresh',\\n    'reservoirIncreaseInterval',\\n    'reservoirIncreaseAmount',\\n    'reservoirIncreaseMaximum',\\n    'lastReservoirIncrease',\\n    'capacityPriorityCounter',\\n    'clientTimeout'\\n  )\\n  local id = settings[1]\\n  local maxConcurrent = tonumber(settings[2])\\n  local running = tonumber(settings[3])\\n  local reservoir = tonumber(settings[4])\\n  local reservoirRefreshInterval = tonumber(settings[5])\\n  local reservoirRefreshAmount = tonumber(settings[6])\\n  local lastReservoirRefresh = tonumber(settings[7])\\n  local reservoirIncreaseInterval = tonumber(settings[8])\\n  local reservoirIncreaseAmount = tonumber(settings[9])\\n  local reservoirIncreaseMaximum = tonumber(settings[10])\\n  local lastReservoirIncrease = tonumber(settings[11])\\n  local capacityPriorityCounter = tonumber(settings[12])\\n  local clientTimeout = tonumber(settings[13])\\n\\n  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  --\\n  -- Process 'running' changes\\n  --\\n  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n  if #expired > 0 then\\n    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n    local flush_batch = function (batch, acc)\\n      local weights = redis.call('hmget', job_weights_key, unpack(batch))\\n                      redis.call('hdel',  job_weights_key, unpack(batch))\\n      local clients = redis.call('hmget', job_clients_key, unpack(batch))\\n                      redis.call('hdel',  job_clients_key, unpack(batch))\\n\\n      -- Calculate sum of removed weights\\n      for i = 1, #weights do\\n        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)\\n      end\\n\\n      -- Calculate sum of removed weights by client\\n      local client_weights = {}\\n      for i = 1, #clients do\\n        local removed = tonumber(weights[i]) or 0\\n        if removed > 0 then\\n          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed\\n        end\\n      end\\n    end\\n\\n    local acc = {\\n      ['total'] = 0,\\n      ['client_weights'] = {}\\n    }\\n    local batch_size = 1000\\n\\n    -- Compute changes to Zsets and apply changes to Hashes\\n    for i = 1, #expired, batch_size do\\n      local batch = {}\\n      for j = i, math.min(i + batch_size - 1, #expired) do\\n        table.insert(batch, expired[j])\\n      end\\n\\n      flush_batch(batch, acc)\\n    end\\n\\n    -- Apply changes to Zsets\\n    if acc['total'] > 0 then\\n      redis.call('hincrby', settings_key, 'done', acc['total'])\\n      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))\\n    end\\n\\n    for client, weight in pairs(acc['client_weights']) do\\n      redis.call('zincrby', client_running_key, -weight, client)\\n    end\\n  end\\n\\n  --\\n  -- Process 'reservoir' changes\\n  --\\n  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil\\n  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then\\n    reservoir = reservoirRefreshAmount\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirRefresh', now\\n    )\\n  end\\n\\n  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil\\n  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then\\n    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)\\n    local incr = reservoirIncreaseAmount * num_intervals\\n    if reservoirIncreaseMaximum ~= nil then\\n      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))\\n    end\\n    if incr > 0 then\\n      reservoir = (reservoir or 0) + incr\\n    end\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)\\n    )\\n  end\\n\\n  --\\n  -- Clear unresponsive clients\\n  --\\n  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))\\n  local unresponsive_lookup = {}\\n  local terminated_clients = {}\\n  for i = 1, #unresponsive do\\n    unresponsive_lookup[unresponsive[i]] = true\\n    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then\\n      table.insert(terminated_clients, unresponsive[i])\\n    end\\n  end\\n  if #terminated_clients > 0 then\\n    redis.call('zrem', client_running_key,         unpack(terminated_clients))\\n    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))\\n    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))\\n    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))\\n  end\\n\\n  --\\n  -- Broadcast capacity changes\\n  --\\n  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then\\n    -- always_publish or was not unlimited, now unlimited\\n    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n\\n  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then\\n    -- capacity was increased\\n    -- send the capacity message to the limiter having the lowest number of running jobs\\n    -- the tiebreaker is the limiter having not registered a job in the longest time\\n\\n    local lowest_concurrency_value = nil\\n    local lowest_concurrency_clients = {}\\n    local lowest_concurrency_last_registered = {}\\n    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')\\n\\n    for i = 1, #client_concurrencies, 2 do\\n      local client = client_concurrencies[i]\\n      local concurrency = tonumber(client_concurrencies[i+1])\\n\\n      if (\\n        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency\\n      ) and (\\n        not unresponsive_lookup[client]\\n      ) and (\\n        tonumber(redis.call('hget', client_num_queued_key, client)) > 0\\n      ) then\\n        lowest_concurrency_value = concurrency\\n        table.insert(lowest_concurrency_clients, client)\\n        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))\\n        table.insert(lowest_concurrency_last_registered, last_registered)\\n      end\\n    end\\n\\n    if #lowest_concurrency_clients > 0 then\\n      local position = 1\\n      local earliest = lowest_concurrency_last_registered[1]\\n\\n      for i,v in ipairs(lowest_concurrency_last_registered) do\\n        if v < earliest then\\n          position = i\\n          earliest = v\\n        end\\n      end\\n\\n      local next_client = lowest_concurrency_clients[position]\\n      redis.call('publish', 'b_'..id,\\n        'capacity-priority:'..(final_capacity or '')..\\n        ':'..next_client..\\n        ':'..capacityPriorityCounter\\n      )\\n      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')\\n    else\\n      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n    end\\n  end\\n\\n  return {\\n    ['capacity'] = final_capacity,\\n    ['running'] = running,\\n    ['reservoir'] = reservoir\\n  }\\nend\\n\",\"queued.lua\":\"local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))\\nlocal valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')\\nlocal client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))\\n\\nlocal sum = 0\\nfor i = 1, #client_queued do\\n  sum = sum + tonumber(client_queued[i])\\nend\\n\\nreturn sum\\n\",\"refresh_expiration.lua\":\"local refresh_expiration = function (now, nextRequest, groupTimeout)\\n\\n  if groupTimeout ~= nil then\\n    local ttl = (nextRequest + groupTimeout) - now\\n\\n    for i = 1, #KEYS do\\n      redis.call('pexpire', KEYS[i], ttl)\\n    end\\n  end\\n\\nend\\n\",\"refs.lua\":\"local settings_key = KEYS[1]\\nlocal job_weights_key = KEYS[2]\\nlocal job_expirations_key = KEYS[3]\\nlocal job_clients_key = KEYS[4]\\nlocal client_running_key = KEYS[5]\\nlocal client_num_queued_key = KEYS[6]\\nlocal client_last_registered_key = KEYS[7]\\nlocal client_last_seen_key = KEYS[8]\\n\\nlocal now = tonumber(ARGV[1])\\nlocal client = ARGV[2]\\n\\nlocal num_static_argv = 2\\n\",\"register.lua\":\"local index = ARGV[num_static_argv + 1]\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\nlocal expiration = tonumber(ARGV[num_static_argv + 3])\\n\\nlocal state = process_tick(now, false)\\nlocal capacity = state['capacity']\\nlocal reservoir = state['reservoir']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'nextRequest',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal nextRequest = tonumber(settings[1])\\nlocal minTime = tonumber(settings[2])\\nlocal groupTimeout = tonumber(settings[3])\\n\\nif conditions_check(capacity, weight) then\\n\\n  redis.call('hincrby', settings_key, 'running', weight)\\n  redis.call('hset', job_weights_key, index, weight)\\n  if expiration ~= nil then\\n    redis.call('zadd', job_expirations_key, now + expiration, index)\\n  end\\n  redis.call('hset', job_clients_key, index, client)\\n  redis.call('zincrby', client_running_key, weight, client)\\n  redis.call('hincrby', client_num_queued_key, client, -1)\\n  redis.call('zadd', client_last_registered_key, now, client)\\n\\n  local wait = math.max(nextRequest - now, 0)\\n  local newNextRequest = now + wait + minTime\\n\\n  if reservoir == nil then\\n    redis.call('hset', settings_key,\\n      'nextRequest', newNextRequest\\n    )\\n  else\\n    reservoir = reservoir - weight\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'nextRequest', newNextRequest\\n    )\\n  end\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\n\\n  return {true, wait, reservoir}\\n\\nelse\\n  return {false}\\nend\\n\",\"register_client.lua\":\"local queued = tonumber(ARGV[num_static_argv + 1])\\n\\n-- Could have been re-registered concurrently\\nif not redis.call('zscore', client_last_seen_key, client) then\\n  redis.call('zadd', client_running_key, 0, client)\\n  redis.call('hset', client_num_queued_key, client, queued)\\n  redis.call('zadd', client_last_registered_key, 0, client)\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\\nreturn {}\\n\",\"running.lua\":\"return process_tick(now, false)['running']\\n\",\"submit.lua\":\"local queueLength = tonumber(ARGV[num_static_argv + 1])\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'id',\\n  'maxConcurrent',\\n  'highWater',\\n  'nextRequest',\\n  'strategy',\\n  'unblockTime',\\n  'penalty',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal id = settings[1]\\nlocal maxConcurrent = tonumber(settings[2])\\nlocal highWater = tonumber(settings[3])\\nlocal nextRequest = tonumber(settings[4])\\nlocal strategy = tonumber(settings[5])\\nlocal unblockTime = tonumber(settings[6])\\nlocal penalty = tonumber(settings[7])\\nlocal minTime = tonumber(settings[8])\\nlocal groupTimeout = tonumber(settings[9])\\n\\nif maxConcurrent ~= nil and weight > maxConcurrent then\\n  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)\\nend\\n\\nlocal reachedHWM = (highWater ~= nil and queueLength == highWater\\n  and not (\\n    conditions_check(capacity, weight)\\n    and nextRequest - now <= 0\\n  )\\n)\\n\\nlocal blocked = strategy == 3 and (reachedHWM or unblockTime >= now)\\n\\nif blocked then\\n  local computedPenalty = penalty\\n  if computedPenalty == nil then\\n    if minTime == 0 then\\n      computedPenalty = 5000\\n    else\\n      computedPenalty = 15 * minTime\\n    end\\n  end\\n\\n  local newNextRequest = now + computedPenalty + minTime\\n\\n  redis.call('hmset', settings_key,\\n    'unblockTime', now + computedPenalty,\\n    'nextRequest', newNextRequest\\n  )\\n\\n  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)\\n  local queued_reset = {}\\n  for i = 1, #clients_queued_reset do\\n    table.insert(queued_reset, clients_queued_reset[i])\\n    table.insert(queued_reset, 0)\\n  end\\n  redis.call('hmset', client_num_queued_key, unpack(queued_reset))\\n\\n  redis.call('publish', 'b_'..id, 'blocked:')\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\nend\\n\\nif not blocked and not reachedHWM then\\n  redis.call('hincrby', client_num_queued_key, client, 1)\\nend\\n\\nreturn {reachedHWM, blocked, strategy}\\n\",\"update_settings.lua\":\"local args = {'hmset', settings_key}\\n\\nfor i = num_static_argv + 1, #ARGV do\\n  table.insert(args, ARGV[i])\\nend\\n\\nredis.call(unpack(args))\\n\\nprocess_tick(now, true)\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"validate_client.lua\":\"if not redis.call('zscore', client_last_seen_key, client) then\\n  return redis.error_reply('UNKNOWN_CLIENT')\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\",\"validate_keys.lua\":\"if not (redis.call('exists', settings_key) == 1) then\\n  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')\\nend\\n\"}")},{}],"7LRob":[function(require,module,exports){var parcelHelpers=require("@parcel/transformer-js/src/esmodule-helpers.js"),_classCallCheckMjs=require("@swc/helpers/src/_class_call_check.mjs"),_classCallCheckMjsDefault=parcelHelpers.interopDefault(_classCallCheckMjs),_createClassMjs=require("@swc/helpers/src/_create_class.mjs"),_createClassMjsDefault=parcelHelpers.interopDefault(_createClassMjs),_regeneratorRuntime=require("regenerator-runtime"),_regeneratorRuntimeDefault=parcelHelpers.interopDefault(_regeneratorRuntime),Events,IORedisConnection,Scripts,parser;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,s,a,o,"next",e)}function o(e){asyncGeneratorStep(i,n,s,a,o,"throw",e)}a(void 0)}))}}parser=require("./parser"),Events=require("./Events"),Scripts=require("./Scripts"),IORedisConnection=function(){var IORedisConnection=function(){function IORedisConnection(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_this=this;(0,_classCallCheckMjsDefault.default)(this,IORedisConnection),parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("ioredis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null!=this.clusterNodes?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):null!=this.client&&null==this.client.duplicate?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(null==this.client&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then((function(){return _this._loadScripts(),{client:_this.client,subscriber:_this.subscriber}}))}return(0,_createClassMjsDefault.default)(IORedisConnection,[{key:"_setup",value:function(e,t){var r=this;return e.setMaxListeners(0),new this.Promise((function(n,s){return e.on("error",(function(e){return r.Events.trigger("error",e)})),t&&e.on("message",(function(e,t){var n;return null!=(n=r.limiters[e])?n._store.onMessage(e,t):void 0})),"ready"===e.status?n():e.once("ready",n)}))}},{key:"_loadScripts",value:function(){var e=this;return Scripts.names.forEach((function(t){return e.client.defineCommand(t,{lua:Scripts.payload(t)})}))}},{key:"__runCommand__",value:function(e){var t=this;return _asyncToGenerator(_regeneratorRuntimeDefault.default.mark((function r(){var n,s,i,a;return _regeneratorRuntimeDefault.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,t.ready;case 3:return r.next=5,t.client.pipeline([e]).exec();case 5:return s=r.sent,i=_slicedToArray(s,1),a=_slicedToArray(i[0],2),a[0],n=a[1],r.abrupt("return",n);case 11:case"end":return r.stop()}}),r)})))()}},{key:"__addLimiter__",value:function(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map((function(r){return new t.Promise((function(n,s){return t.subscriber.subscribe(r,(function(){return t.limiters[r]=e,n()}))}))})))}},{key:"__removeLimiter__",value:function(e){var t=this;return[e.channel(),e.channel_client()].forEach(function(){var e=_asyncToGenerator(_regeneratorRuntimeDefault.default.mark((function e(r){return _regeneratorRuntimeDefault.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.terminated){e.next=3;break}return e.next=3,t.subscriber.unsubscribe(r);case 3:return e.abrupt("return",delete t.limiters[r]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"__scriptArgs__",value:function(e,t,r,n){var s;return[(s=Scripts.keys(e,t)).length].concat(s,r,n)}},{key:"__scriptFn__",value:function(e){return this.client[e].bind(this.client)}},{key:"disconnect",value:function(){var e,t,r,n,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(e=0,r=(n=Object.keys(this.limiters)).length;e<r;e++)t=n[e],clearInterval(this.limiters[t]._store.heartbeat);return this.limiters={},this.terminated=!0,s?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}]),IORedisConnection}();return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise:Promise,Events:null},IORedisConnection}.call(void 0),module.exports=IORedisConnection},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","regenerator-runtime":"achxx","./parser":"2BgUG","./Events":"atGPC","./Scripts":"9k6kW","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],vqi7z:[function(e,t,r){var n,s,i=e("@parcel/transformer-js/src/esmodule-helpers.js"),a=e("@swc/helpers/src/_class_call_check.mjs"),o=i.interopDefault(a),u=e("@swc/helpers/src/_create_class.mjs"),c=i.interopDefault(u);n=e("./BottleneckError"),s=function(){function e(t){(0,o.default)(this,e),this.status=t,this._jobs={},this.counts=this.status.map((function(){return 0}))}return(0,c.default)(e,[{key:"next",value:function(e){var t,r;return r=(t=this._jobs[e])+1,null!=t&&r<this.status.length?(this.counts[t]--,this.counts[r]++,this._jobs[e]++):null!=t?(this.counts[t]--,delete this._jobs[e]):void 0}},{key:"start",value:function(e){return 0,this._jobs[e]=0,this.counts[0]++}},{key:"remove",value:function(e){var t;return null!=(t=this._jobs[e])&&(this.counts[t]--,delete this._jobs[e]),null!=t}},{key:"jobStatus",value:function(e){var t;return null!=(t=this.status[this._jobs[e]])?t:null}},{key:"statusJobs",value:function(e){var t,r,s,i;if(null!=e){if((r=this.status.indexOf(e))<0)throw new n("status must be one of ".concat(this.status.join(", ")));for(t in i=[],s=this._jobs)s[t]===r&&i.push(t);return i}return Object.keys(this._jobs)}},{key:"statusCounts",value:function(){var e=this;return this.counts.reduce((function(t,r,n){return t[e.status[n]]=r,t}),{})}}]),e}(),t.exports=s},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","./BottleneckError":"bTksA","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],jNoa1:[function(e,t,r){var n,s,i=e("@parcel/transformer-js/src/esmodule-helpers.js"),a=e("@swc/helpers/src/_class_call_check.mjs"),o=i.interopDefault(a),u=e("@swc/helpers/src/_create_class.mjs"),c=i.interopDefault(u),l=e("@swc/helpers/src/_to_consumable_array.mjs"),f=i.interopDefault(l),h=e("regenerator-runtime"),d=i.interopDefault(h);function p(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){p(i,n,s,a,o,"next",e)}function o(e){p(i,n,s,a,o,"throw",e)}a(void 0)}))}}n=e("./DLList"),s=function(){function e(t,r){(0,o.default)(this,e),this.schedule=this.schedule.bind(this),this.name=t,this.Promise=r,this._running=0,this._queue=new n}return(0,c.default)(e,[{key:"isEmpty",value:function(){return 0===this._queue.length}},{key:"_tryToRun",value:function(){var e=this;return v(d.default.mark((function t(){var r,n,s,i,a,o,u,c;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e._running<1&&e._queue.length>0)){t.next=14;break}return e._running++,c=e._queue.shift(),u=c.task,r=c.args,a=c.resolve,i=c.reject,t.next=10,v(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.apply(void 0,(0,f.default)(r));case 3:return o=e.sent,e.abrupt("return",(function(){return a(o)}));case 7:return e.prev=7,e.t0=e.catch(0),s=e.t0,e.abrupt("return",(function(){return i(s)}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))();case 10:return n=t.sent,e._running--,e._tryToRun(),t.abrupt("return",n());case 14:case"end":return t.stop()}}),t)})))()}},{key:"schedule",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s,i,a;return a=i=null,s=new this.Promise((function(e,t){return a=e,i=t})),this._queue.push({task:e,args:r,resolve:a,reject:i}),this._tryToRun(),s}}]),e}(),t.exports=s},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","./DLList":"inXX9","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"2ioVv":[function(e,t,r){t.exports=JSON.parse('{"version":"2.19.5"}')},{}],atrI1:[function(e,t,r){var n,s,i,a,o,u,c=e("@parcel/transformer-js/src/esmodule-helpers.js"),l=e("@swc/helpers/src/_class_call_check.mjs"),f=c.interopDefault(l),h=e("@swc/helpers/src/_create_class.mjs"),d=c.interopDefault(h),p=e("@swc/helpers/src/_to_consumable_array.mjs"),v=c.interopDefault(p),m=e("regenerator-runtime"),y=c.interopDefault(m);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e,t,r,n,s,i,a){try{var o=e[i](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,s)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function a(e){g(i,n,s,a,o,"next",e)}function o(e){g(i,n,s,a,o,"throw",e)}a(void 0)}))}}u=e("./parser"),n=e("./Events"),a=e("./RedisConnection"),i=e("./IORedisConnection"),o=e("./Scripts"),s=function(){var t=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,t),this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=r,u.load(this.limiterOptions,this.defaults,this),this.Events=new n(this),this.instances={},this.Bottleneck=e("./Bottleneck"),this._startAutoCleanup(),this.sharedConnection=null!=this.connection,null==this.connection&&("redis"===this.limiterOptions.datastore?this.connection=new a(Object.assign({},this.limiterOptions,{Events:this.Events})):"ioredis"===this.limiterOptions.datastore&&(this.connection=new i(Object.assign({},this.limiterOptions,{Events:this.Events}))))}return(0,d.default)(t,[{key:"key",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this;return null!=(e=this.instances[r])?e:(t=n.instances[r]=new n.Bottleneck(Object.assign(n.limiterOptions,{id:"".concat(n.id,"-").concat(r),timeout:n.timeout,connection:n.connection})),n.Events.trigger("created",t,r),t)}},{key:"deleteKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this;return b(y.default.mark((function r(){var n,s;return y.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=t.instances[e],!t.connection){r.next=6;break}return r.next=5,t.connection.__runCommand__(["del"].concat((0,v.default)(o.allKeys("".concat(t.id,"-").concat(e)))));case 5:n=r.sent;case 6:if(null==s){r.next=10;break}return delete t.instances[e],r.next=10,s.disconnect();case 10:return r.abrupt("return",null!=s||n>0);case 11:case"end":return r.stop()}}),r)})))()}},{key:"limiters",value:function(){var e,t,r,n;for(e in r=[],t=this.instances)n=t[e],r.push({key:e,limiter:n});return r}},{key:"keys",value:function(){return Object.keys(this.instances)}},{key:"clusterKeys",value:function(){var e=this;return b(y.default.mark((function t(){var r,n,s,i,a,o,u,c,l,f,h;return y.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.connection){t.next=3;break}return t.abrupt("return",e.Promise.resolve(e.keys()));case 3:o=[],r=null,l="b_".concat(e.id,"-").length,n=9;case 7:if(0===r){t.next=18;break}return t.next=10,e.connection.__runCommand__(["scan",null!=r?r:0,"match","b_".concat(e.id,"-*_settings"),"count",1e4]);case 10:for(f=t.sent,h=_(f,2),c=h[0],s=h[1],r=~~c,i=0,u=s.length;i<u;i++)a=s[i],o.push(a.slice(l,-n));t.next=7;break;case 18:return t.abrupt("return",o);case 19:case"end":return t.stop()}}),t)})))()}},{key:"_startAutoCleanup",value:function(){var e,t=this;return clearInterval(this.interval),"function"==typeof(e=this.interval=setInterval(b(y.default.mark((function e(){var r,n,s,i,a,o;return y.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Date.now(),s=t.instances,i=[],e.t0=regeneratorRuntime.keys(s);case 5:if((e.t1=e.t0()).done){e.next=24;break}return n=e.t1.value,o=s[n],e.prev=8,e.next=11,o._store.__groupCheck__(a);case 11:if(!e.sent){e.next=15;break}i.push(t.deleteKey(n)),e.next=16;break;case 15:i.push(void 0);case 16:e.next=22;break;case 18:e.prev=18,e.t2=e.catch(8),r=e.t2,i.push(o.Events.trigger("error",r));case 22:e.next=5;break;case 24:return e.abrupt("return",i);case 25:case"end":return e.stop()}}),e,null,[[8,18]])}))),this.timeout/2)).unref?e.unref():void 0}},{key:"updateSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u.overwrite(e,this.defaults,this),u.overwrite(e,e,this.limiterOptions),null!=e.timeout)return this._startAutoCleanup()}},{key:"disconnect",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.sharedConnection)return null!=(e=this.connection)?e.disconnect(t):void 0}}]),t}();return t.prototype.defaults={timeout:3e5,connection:null,Promise:Promise,id:"group-key"},t}.call(void 0),t.exports=s},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","regenerator-runtime":"achxx","./parser":"2BgUG","./Events":"atGPC","./RedisConnection":"btByZ","./IORedisConnection":"7LRob","./Scripts":"9k6kW","./Bottleneck":"7ZDSs","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"6ptSl":[function(e,t,r){var n,s,i,a=e("@parcel/transformer-js/src/esmodule-helpers.js"),o=e("@swc/helpers/src/_class_call_check.mjs"),u=a.interopDefault(o),c=e("@swc/helpers/src/_create_class.mjs"),l=a.interopDefault(c);i=e("./parser"),s=e("./Events"),n=function(){var e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,e),this.options=t,i.load(this.options,this.defaults,this),this.Events=new s(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}return(0,l.default)(e,[{key:"_resetPromise",value:function(){var e=this;return this._promise=new this.Promise((function(t,r){return e._resolve=t}))}},{key:"_flush",value:function(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}},{key:"add",value:function(e){var t,r=this;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():null!=this.maxTime&&1===this._arr.length&&(this._timeout=setTimeout((function(){return r._flush()}),this.maxTime)),t}}]),e}();return e.prototype.defaults={maxTime:null,maxSize:null,Promise:Promise},e}.call(void 0),t.exports=n},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","./parser":"2BgUG","./Events":"atGPC","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],"5dFWu":[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return y}));var s=e("@swc/helpers/src/_class_call_check.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_create_class.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_define_property.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_inherits.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_to_consumable_array.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_create_super.mjs"),v=n.interopDefault(p),m=e("./baseHandler"),y=function(e){"use strict";(0,f.default)(r,e);var t=(0,v.default)(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"getItems",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).getComments.apply(n,(0,d.default)(t))}},{key:"editItem",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).editComment.apply(n,(0,d.default)(t))}},{key:"deleteItem",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).deleteComment.apply(n,(0,d.default)(t))}}]),r}(n.interopDefault(m).default);(0,c.default)(y,"itemTextAttribute","body"),(0,c.default)(y,"itemName","Comment")},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_define_property.mjs":"gz59H","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","@swc/helpers/src/_create_super.mjs":"dJHhu","./baseHandler":"lq19I","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],lq19I:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return j}));var s=e("@swc/helpers/src/_async_to_generator.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_class_call_check.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_class_private_field_get.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_class_private_field_init.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_class_private_method_get.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_class_private_method_init.mjs"),v=n.interopDefault(p),m=e("@swc/helpers/src/_create_class.mjs"),y=n.interopDefault(m),_=e("regenerator-runtime"),g=n.interopDefault(_),b=new WeakSet,k=new WeakSet,w=new WeakMap,j=function(){"use strict";function e(t,r,n){(0,o.default)(this,e),(0,v.default)(this,b),(0,v.default)(this,k),(0,f.default)(this,w,{get:A,set:void 0}),this.client=t,this.username=r,this.since=n,this.allItemsLoaded=!1}return(0,y.default)(e,[{key:"nuke",value:function(){var e=this;return(0,i.default)(g.default.mark((function t(){var r;return g.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((0,c.default)(e,w).length<50)){t.next=3;break}return t.next=3,e.loadItems();case 3:if(r=(0,c.default)(e,w)[0]){t.next=7;break}return console.log("done!"),t.abrupt("return");case 7:return t.next=9,(0,d.default)(e,k,E).call(e,r);case 9:return t.abrupt("return",e.nuke());case 10:case"end":return t.stop()}}),t)})))()}},{key:"loadItems",value:function(){var e=this;return(0,i.default)(g.default.mark((function t(){return g.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.allItemsLoaded){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",e.getItems(e.username,{limit:"100",sort:"new",after:e.after},(function(t){if(e.after=t.data.after,e.allItemsLoaded=!e.after,(0,d.default)(e,b,x).call(e,t),(0,c.default)(e,w).length<50&&!e.allItemsLoaded)return e.loadItems()})));case 3:case"end":return t.stop()}}),t)})))()}}]),e}();function x(e){var t,r=this,n=document.getElementById("items"),s=document.getElementById("item-template");e.data.children.forEach((function(e){(!r.since||e.data.created_utc<r.since)&&((t=s.content.cloneNode(!0).querySelector("li")).textContent=e.data[r.constructor.itemTextAttribute],t.dataset.id=e.data.id,n.appendChild(t))}))}function E(e){return D.apply(this,arguments)}function D(){return(D=(0,i.default)(g.default.mark((function e(t){var r;return g.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dataset.id,"Deleted by rnuke (https://rnuke.github.io)",t.classList.add("deleted"),e.next=5,this.editItem(r,"Deleted by rnuke (https://rnuke.github.io)");case 5:return e.next=7,this.deleteItem(r);case 7:t.addEventListener("animationend",(function(e){return e.currentTarget.remove()})),t.classList.add("slide-out");case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function A(){return document.getElementById("items").querySelectorAll("li:not(.deleted)")}},{"@swc/helpers/src/_async_to_generator.mjs":"d46FK","@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_class_private_field_get.mjs":"ax2sY","@swc/helpers/src/_class_private_field_init.mjs":"eHYn6","@swc/helpers/src/_class_private_method_get.mjs":"aKsR1","@swc/helpers/src/_class_private_method_init.mjs":"6V8Bd","@swc/helpers/src/_create_class.mjs":"e1EPh","regenerator-runtime":"achxx","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],eVPMF:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r),n.export(r,"default",(function(){return y}));var s=e("@swc/helpers/src/_class_call_check.mjs"),i=n.interopDefault(s),a=e("@swc/helpers/src/_create_class.mjs"),o=n.interopDefault(a),u=e("@swc/helpers/src/_define_property.mjs"),c=n.interopDefault(u),l=e("@swc/helpers/src/_inherits.mjs"),f=n.interopDefault(l),h=e("@swc/helpers/src/_to_consumable_array.mjs"),d=n.interopDefault(h),p=e("@swc/helpers/src/_create_super.mjs"),v=n.interopDefault(p),m=e("./baseHandler"),y=function(e){"use strict";(0,f.default)(r,e);var t=(0,v.default)(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,o.default)(r,[{key:"getItems",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).getPosts.apply(n,(0,d.default)(t))}},{key:"editItem",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).editPost.apply(n,(0,d.default)(t))}},{key:"deleteItem",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return(n=this.client).editPost.apply(n,(0,d.default)(t))}}]),r}(n.interopDefault(m).default);(0,c.default)(y,"itemTextAttribute","title"),(0,c.default)(y,"itemName","Post")},{"@swc/helpers/src/_class_call_check.mjs":"bcDJH","@swc/helpers/src/_create_class.mjs":"e1EPh","@swc/helpers/src/_define_property.mjs":"gz59H","@swc/helpers/src/_inherits.mjs":"kfOz5","@swc/helpers/src/_to_consumable_array.mjs":"lp3rF","@swc/helpers/src/_create_super.mjs":"dJHhu","./baseHandler":"lq19I","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}],enz6T:[function(e,t,r){var n=e("@parcel/transformer-js/src/esmodule-helpers.js");n.defineInteropFlag(r);var s=e("./_array_with_holes.mjs"),a=n.interopDefault(s),o=e("./_iterable_to_array.mjs"),u=n.interopDefault(o),c=e("./_non_iterable_rest.mjs"),l=n.interopDefault(c),f=e("./_unsupported_iterable_to_array.mjs"),h=n.interopDefault(f);r.default=function(e){return(0,a.default)(e)||(0,u.default)(e)||(0,h.default)(e,i)||(0,l.default)()}},{"./_array_with_holes.mjs":"bOETF","./_iterable_to_array.mjs":"5xef1","./_non_iterable_rest.mjs":"fd7AC","./_unsupported_iterable_to_array.mjs":"9fTEq","@parcel/transformer-js/src/esmodule-helpers.js":"3ieD1"}]},["b4ts6"],"b4ts6");
//# sourceMappingURL=main.js.map
